#include <vm_map.h>
#include <size.h>

/*  label, ipa, pa, size, attr */
struct memdesc_t vm0_device_md[] = {
    {"memory", 0x40000000, 0x40000000, 0x40000000, MEMATTR_DEVICE_MEMORY, 1},

    {"chipid", 0x10000000, 0x10000000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"interrupt-contoller", 0x10440000, 0x10440000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    { "gicd", CFG_GIC_BASE_PA | 0x1000, CFG_GIC_BASE_PA | 0x1000, SZ_4K, MEMATTR_DEVICE_MEMORY, 0 },
    { "gicc", CFG_GIC_BASE_PA | 0x2000, CFG_GIC_BASE_PA | 0x6000, SZ_8K, MEMATTR_DEVICE_MEMORY, 1 },

    {"dwmmc0", 0x12200000, 0x12200000, 0x2000, MEMATTR_DEVICE_MEMORY, 1},
    {"dwmmc1", 0x12210000, 0x12210000, 0x2000, MEMATTR_DEVICE_MEMORY, 1},
    {"dwmmc2", 0x12220000, 0x12220000, 0x2000, MEMATTR_DEVICE_MEMORY, 1},

    {"serial", 0x12c00000, 0x12c00000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"serial", 0x12c10000, 0x12c10000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"serial", 0x12c20000, 0x12c20000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"serial", 0x12c30000, 0x12c30000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"rtc", 0x101e0000, 0x101e0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"watchdog", 0x101d0000, 0x101d0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"pinctrl", 0x13400000, 0x13400000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"pinctrl", 0x13410000, 0x13410000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"pinctrl", 0x14000000, 0x14000000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"pinctrl", 0x14010000, 0x14010000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"pinctrl", 0x03860000, 0x03860000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"watchdog", 0x10020000, 0x10020000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"firmware", 0x02073000, 0x02073000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"clock-controller", 0x10010000, 0x10010000, 0x30000, MEMATTR_DEVICE_MEMORY, 1},

    {"cci", 0x10d20000, 0x10d20000, 0x10000, MEMATTR_DEVICE_MEMORY, 1},

    {"mct", 0x101c0000, 0x101c0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"pwm-clock-controller", 0x12dd0000, 0x12dd0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"sysmmu", 0x10a60000, 0x10a60000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"sysmmu", 0x10a70000, 0x10a70000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"sysmmu", 0x14650000, 0x14650000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"sysmmu", 0x13e80000, 0x13e80000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"sysmmu", 0x13e90000, 0x13e90000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"sysmmu", 0x12880000, 0x12880000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"sysmmu", 0x12890000, 0x12890000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"sysmmu", 0x128a0000, 0x128a0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"sysmmu", 0x128c0000, 0x128c0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"sysmmu", 0x128d0000, 0x128d0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"sysmmu", 0x128e0000, 0x128e0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"sysmmu", 0x11f10000, 0x11f10000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"sysmmu", 0x11f20000, 0x11f20000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"sysmmu", 0x11200000, 0x11200000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"sysmmu", 0x11210000, 0x11210000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"sysmmu", 0x14640000, 0x14640000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"sysmmu", 0x14680000, 0x14680000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"i2c", 0x12c60000, 0x12c60000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"i2c", 0x12c70000, 0x12c70000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"i2c", 0x12c90000, 0x12c90000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"hsi2c", 0x12ca0000, 0x12ca0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"hsi2c", 0x12cb0000, 0x12cb0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"hsi2c", 0x12cc0000, 0x12cc0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"hsi2c", 0x12cd0000, 0x12cd0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"hsi2c", 0x12e00000, 0x12e00000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"hsi2c", 0x12e10000, 0x12e10000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"hsi2c", 0x12e20000, 0x12e20000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"mail", 0x11800000, 0x11800000, 0x5000, MEMATTR_DEVICE_MEMORY, 1},

    {"mdma", 0x10800000, 0x10800000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"pdma", 0x121a0000, 0x121a0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"pdma", 0x121b0000, 0x121b0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"adma", 0x38800000, 0x38800000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"usb", 0x12120000, 0x12120000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"usb2phy", 0x12130000, 0x12130000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"dwc3", 0x12000000, 0x12000000, 0x10000, MEMATTR_DEVICE_MEMORY, 1},
    {"dwc3", 0x12400000, 0x12400000, 0x10000, MEMATTR_DEVICE_MEMORY, 1},

    {"adc", 0x12d10000, 0x12d10000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"usbphy", 0x12100000, 0x12100000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"usbphy-sys", 0x10040704, 0x10040704, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"usbphy", 0x12500000, 0x12500000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"usbphy-sys", 0x10040708, 0x10040708, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"spi", 0x12d20000, 0x12d20000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"spi", 0x12d30000, 0x12d30000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"spi", 0x12d40000, 0x12d40000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"mfc", 0x11000000, 0x11000000, 0x10000, MEMATTR_DEVICE_MEMORY, 1},

    {"pwm", 0x12dd0000, 0x12dd0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"tmu", 0x10060000, 0x10060000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"tmu", 0x10064000, 0x10064000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"tmu", 0x10068000, 0x10068000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"tmu", 0x1006c000, 0x1006c000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"tmu", 0x100a0000, 0x100a0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"gsc", 0x13e00000, 0x13e00000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"gsc", 0x13e10000, 0x13e10000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"jpeg", 0x11f50000, 0x11f50000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"jpeg", 0x11f60000, 0x11f60000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"scaler", 0x12800000, 0x12800000, 0x2000, MEMATTR_DEVICE_MEMORY, 1},
    {"scaler", 0x12810000, 0x12810000, 0x2000, MEMATTR_DEVICE_MEMORY, 1},
    {"scaler", 0x12820000, 0x12820000, 0x2000, MEMATTR_DEVICE_MEMORY, 1},

    {"fimg2d", 0x10850000, 0x10850000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"lpass", 0x03810000, 0x03810000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"lpass", 0x03000000, 0x03000000, 0x50000, MEMATTR_DEVICE_MEMORY, 1},

    {"i2s", 0x03830000, 0x03830000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"pcm", 0x03840000, 0x03840000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"spdif", 0x12db0000, 0x12db0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"system-controller", 0x10040000, 0x10040000, 0x5000, MEMATTR_DEVICE_MEMORY, 1},
    {"syscon", 0x10050000, 0x10050000, 0x5000, MEMATTR_DEVICE_MEMORY, 1},

    {"mixer", 0x14450000, 0x14450000, 0x10000, MEMATTR_DEVICE_MEMORY, 1},

    {"hdmi", 0x14530000, 0x14530000, 0x80000, MEMATTR_DEVICE_MEMORY, 1},

    {"cec", 0x101b0000, 0x101b0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"hdmiphy-sys", 0x10040700, 0x10040700, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"hdmiphy", 0x145d0000, 0x145d0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"video-phy", 0x10040728, 0x10040728, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"dp-controller", 0x145b0000, 0x145b0000, 0x10000, MEMATTR_DEVICE_MEMORY, 1},

    {"fimd", 0x14400000, 0x14400000, 0x40000, MEMATTR_DEVICE_MEMORY, 1},
    {"fimd", 0x14500000, 0x14500000, 0x40000, MEMATTR_DEVICE_MEMORY, 1},

    {"spi", 0x131a0000, 0x131a0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},
    {"spi", 0x131b0000, 0x131b0000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"sss", 0x10830000, 0x10830000, 0x8000, MEMATTR_DEVICE_MEMORY, 1},
    {"slimsss", 0x10900000, 0x10900000, 0x1000, MEMATTR_DEVICE_MEMORY, 1},

    {"pd", 0x10044000, 0x10044000, 0x2000, MEMATTR_DEVICE_MEMORY, 1},
    { 0, 0, 0, 0, 0, 0 }
};

struct memdesc_t vm1_device_md[] = {
    { "v2m_serial0", 0x12C20000, 0x12C20000, SZ_64K, MEMATTR_DEVICE_MEMORY, 1 },
    { "gicd", CFG_GIC_BASE_PA | 0x1000, CFG_GIC_BASE_PA | 0x1000, SZ_4K, MEMATTR_DEVICE_MEMORY, 0 },
    { "gicc", CFG_GIC_BASE_PA | 0x2000, CFG_GIC_BASE_PA | 0x6000, SZ_8K, MEMATTR_DEVICE_MEMORY, 1 },
    {"start", 0x40000000, 0x50000000, SZ_1M, MEMATTR_DEVICE_MEMORY, 1 },
    { 0, 0, 0, 0, 0, 0 }
};

struct memdesc_t vm2_device_md[] = {
    { "v2m_serial0", 0x12C20000, 0x12C20000, SZ_64K, MEMATTR_DEVICE_MEMORY, 1 },
    { "gicd", CFG_GIC_BASE_PA | 0x1000, CFG_GIC_BASE_PA | 0x1000, SZ_4K, MEMATTR_DEVICE_MEMORY, 0 },
    { "gicc", CFG_GIC_BASE_PA | 0x2000, CFG_GIC_BASE_PA | 0x6000, SZ_8K, MEMATTR_DEVICE_MEMORY, 1 },
    {"start", 0x40000000, 0x60000000, SZ_1M, MEMATTR_NORMAL_WB_CACHEABLE, 1 },
    { 0, 0, 0, 0, 0, 0 }
};

struct memdesc_t *vm_mmap[NUM_GUESTS_STATIC];


void setup_vm_mmap(void)
{
    // TODO(wonseok): it will be replaced by DTB.
    vm_mmap[0] = vm0_device_md;
    vm_mmap[1] = vm1_device_md;
    vm_mmap[2] = vm2_device_md;
}
