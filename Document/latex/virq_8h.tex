\hypertarget{virq_8h}{\section{virq.\-h \-File \-Reference}
\label{virq_8h}\index{virq.\-h@{virq.\-h}}
}
{\ttfamily \#include $<$hvmm\-\_\-types.\-h$>$}\*
\-Include dependency graph for virq.\-h\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=160pt]{virq_8h__incl}
\end{center}
\end{figure}
\-This graph shows which files directly or indirectly include this file\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=268pt]{virq_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{hvmm__types_8h_a39d593b2c97852f566d7472b76ab7ba2}{hvmm\-\_\-status\-\_\-t} \hyperlink{virq_8h_a6bd895c43353871b1a0da7c40301215d}{virq\-\_\-inject} (\hyperlink{hvmm__types_8h_af7e9bd0adfb7d10e7a7a0ee60a5f962c}{vmid\-\_\-t} vmid, \hyperlink{arch__types_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} virq, \hyperlink{arch__types_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} pirq, \hyperlink{arch__types_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} hw)
\item 
\hyperlink{hvmm__types_8h_a39d593b2c97852f566d7472b76ab7ba2}{hvmm\-\_\-status\-\_\-t} \hyperlink{virq_8h_a47f4ee9004f1b4f6a87cf6e1f4c51557}{virq\-\_\-init} (void)
\end{DoxyCompactItemize}


\subsection{\-Function \-Documentation}
\hypertarget{virq_8h_a47f4ee9004f1b4f6a87cf6e1f4c51557}{\index{virq.\-h@{virq.\-h}!virq\-\_\-init@{virq\-\_\-init}}
\index{virq\-\_\-init@{virq\-\_\-init}!virq.h@{virq.\-h}}
\subsubsection[{virq\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf hvmm\-\_\-status\-\_\-t} {\bf virq\-\_\-init} (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{virq_8h_a47f4ee9004f1b4f6a87cf6e1f4c51557}


\-Definition at line 88 of file virq.\-c.


\begin{DoxyCode}
{
    int i, j;

    for( i = 0; i < NUM_GUESTS_STATIC; i++) {
        for( j = 0; j < (VIRQ_MAX_ENTRIES + 1); j++ ) {
            _guest_virqs[i][j].valid = 0;
        }
    }

    vgic_setcallback_virq_flush(&virq_flush);
    return HVMM_STATUS_SUCCESS;
}
\end{DoxyCode}


\-Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{virq_8h_a47f4ee9004f1b4f6a87cf6e1f4c51557_cgraph}
\end{center}
\end{figure}


\hypertarget{virq_8h_a6bd895c43353871b1a0da7c40301215d}{\index{virq.\-h@{virq.\-h}!virq\-\_\-inject@{virq\-\_\-inject}}
\index{virq\-\_\-inject@{virq\-\_\-inject}!virq.h@{virq.\-h}}
\subsubsection[{virq\-\_\-inject}]{\setlength{\rightskip}{0pt plus 5cm}{\bf hvmm\-\_\-status\-\_\-t} {\bf virq\-\_\-inject} (
\begin{DoxyParamCaption}
\item[{{\bf vmid\-\_\-t}}]{vmid, }
\item[{{\bf uint32\-\_\-t}}]{virq, }
\item[{{\bf uint32\-\_\-t}}]{pirq, }
\item[{{\bf uint8\-\_\-t}}]{hw}
\end{DoxyParamCaption}
)}}\label{virq_8h_a6bd895c43353871b1a0da7c40301215d}


\-Definition at line 26 of file virq.\-c.


\begin{DoxyCode}
{
    hvmm_status_t result = HVMM_STATUS_BUSY;
    int i;
    struct virq_entry *q = &_guest_virqs[vmid][0];
    int slot = slotvirq_getslot(vmid, virq);
    if ( slot == SLOT_INVALID ) {
        /* Inject only the same virq is not present in a slot */
        for( i = 0; i < VIRQ_MAX_ENTRIES; i++ ) {
            if ( q[i].valid == 0 ) {
                q[i].pirq = pirq;
                q[i].virq = virq;   
                q[i].hw = hw;
                q[i].valid = 1;
                result = HVMM_STATUS_SUCCESS;
                break;
            }
        }
    printh( "virq: queueing virq %d pirq %d to vmid %d %s\n", virq, pirq, vmid,
       result == HVMM_STATUS_SUCCESS ? "done" : "failed");
    } else {
     printh( "virq: rejected queueing duplicated virq %d pirq %d to vmid %d %s
      \n", virq, pirq, vmid);    
    }
    return result;
}
\end{DoxyCode}


\-Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=262pt]{virq_8h_a6bd895c43353871b1a0da7c40301215d_cgraph}
\end{center}
\end{figure}


