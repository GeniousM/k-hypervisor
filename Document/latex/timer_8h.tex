\hypertarget{timer_8h}{\section{timer.\-h \-File \-Reference}
\label{timer_8h}\index{timer.\-h@{timer.\-h}}
}
{\ttfamily \#include \char`\"{}hvmm\-\_\-types.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}arch\-\_\-types.\-h\char`\"{}}\*
\-Include dependency graph for timer.\-h\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=190pt]{timer_8h__incl}
\end{center}
\end{figure}
\-This graph shows which files directly or indirectly include this file\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=244pt]{timer_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{\-Data \-Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structtimer__channel}{timer\-\_\-channel}
\end{DoxyCompactItemize}
\subsection*{\-Defines}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{timer_8h_abeca3fcbfd18e8e9df6806b1061c67fe}{\-T\-I\-M\-E\-R\-\_\-\-M\-A\-X\-\_\-\-C\-H\-A\-N\-N\-E\-L\-\_\-\-C\-A\-L\-L\-B\-A\-C\-K\-S}~8
\end{DoxyCompactItemize}
\subsection*{\-Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void($\ast$ \hyperlink{timer_8h_a1d134e8a1c43ace1df8be568acbdd90a}{timer\-\_\-callback\-\_\-t} )(void $\ast$pdata)
\end{DoxyCompactItemize}
\subsection*{\-Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10}{timer\-\_\-channel\-\_\-t} \{ \hyperlink{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10afdf33c33958337aadb7613ad58766d77}{timer\-\_\-sched} =  0, 
\hyperlink{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10ac3fa8162a3526a578374e198845ce9ad}{\-T\-I\-M\-E\-R\-\_\-\-N\-U\-M\-\_\-\-M\-A\-X\-\_\-\-C\-H\-A\-N\-N\-E\-L\-S}
 \}
\end{DoxyCompactItemize}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{hvmm__types_8h_a39d593b2c97852f566d7472b76ab7ba2}{hvmm\-\_\-status\-\_\-t} \hyperlink{timer_8h_a833062839177da96d1c10cafd66fb5e3}{timer\-\_\-init} (\hyperlink{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10}{timer\-\_\-channel\-\_\-t} channel)
\item 
\hyperlink{hvmm__types_8h_a39d593b2c97852f566d7472b76ab7ba2}{hvmm\-\_\-status\-\_\-t} \hyperlink{timer_8h_ace4fc5a149dad9e3b44a629ad79a0732}{timer\-\_\-start} (\hyperlink{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10}{timer\-\_\-channel\-\_\-t} channel)
\item 
\hyperlink{hvmm__types_8h_a39d593b2c97852f566d7472b76ab7ba2}{hvmm\-\_\-status\-\_\-t} \hyperlink{timer_8h_afa821ebfe5739346936da29aafc27f09}{timer\-\_\-stop} (\hyperlink{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10}{timer\-\_\-channel\-\_\-t} channel)
\item 
\hyperlink{hvmm__types_8h_a39d593b2c97852f566d7472b76ab7ba2}{hvmm\-\_\-status\-\_\-t} \hyperlink{timer_8h_a0be875a55b17ab6db30adc87ce373f47}{timer\-\_\-set\-\_\-interval} (\hyperlink{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10}{timer\-\_\-channel\-\_\-t} channel, \hyperlink{arch__types_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} interval\-\_\-us)
\item 
\hyperlink{arch__types_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} \hyperlink{timer_8h_a3b91c51947e6979ee6c4f59166aff767}{timer\-\_\-get\-\_\-interval} (\hyperlink{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10}{timer\-\_\-channel\-\_\-t} channel)
\item 
\hyperlink{hvmm__types_8h_a39d593b2c97852f566d7472b76ab7ba2}{hvmm\-\_\-status\-\_\-t} \hyperlink{timer_8h_a635561dc3a7636a6049bacc814d04dec}{timer\-\_\-add\-\_\-callback} (\hyperlink{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10}{timer\-\_\-channel\-\_\-t} channel, \hyperlink{timer_8h_a1d134e8a1c43ace1df8be568acbdd90a}{timer\-\_\-callback\-\_\-t} handler)
\item 
\hyperlink{hvmm__types_8h_a39d593b2c97852f566d7472b76ab7ba2}{hvmm\-\_\-status\-\_\-t} \hyperlink{timer_8h_a4371fe74ccc70da5f9a99313a57d5034}{timer\-\_\-remove\-\_\-callback} (\hyperlink{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10}{timer\-\_\-channel\-\_\-t} channel, \hyperlink{timer_8h_a1d134e8a1c43ace1df8be568acbdd90a}{timer\-\_\-callback\-\_\-t} handler)
\item 
\hyperlink{arch__types_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\-\_\-t} \hyperlink{timer_8h_af519d8d7c7657dd067bc07e0b4871d0d}{timer\-\_\-t2c} (\hyperlink{arch__types_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\-\_\-t} time\-\_\-us)
\end{DoxyCompactItemize}


\subsection{\-Define \-Documentation}
\hypertarget{timer_8h_abeca3fcbfd18e8e9df6806b1061c67fe}{\index{timer.\-h@{timer.\-h}!\-T\-I\-M\-E\-R\-\_\-\-M\-A\-X\-\_\-\-C\-H\-A\-N\-N\-E\-L\-\_\-\-C\-A\-L\-L\-B\-A\-C\-K\-S@{\-T\-I\-M\-E\-R\-\_\-\-M\-A\-X\-\_\-\-C\-H\-A\-N\-N\-E\-L\-\_\-\-C\-A\-L\-L\-B\-A\-C\-K\-S}}
\index{\-T\-I\-M\-E\-R\-\_\-\-M\-A\-X\-\_\-\-C\-H\-A\-N\-N\-E\-L\-\_\-\-C\-A\-L\-L\-B\-A\-C\-K\-S@{\-T\-I\-M\-E\-R\-\_\-\-M\-A\-X\-\_\-\-C\-H\-A\-N\-N\-E\-L\-\_\-\-C\-A\-L\-L\-B\-A\-C\-K\-S}!timer.h@{timer.\-h}}
\subsubsection[{\-T\-I\-M\-E\-R\-\_\-\-M\-A\-X\-\_\-\-C\-H\-A\-N\-N\-E\-L\-\_\-\-C\-A\-L\-L\-B\-A\-C\-K\-S}]{\setlength{\rightskip}{0pt plus 5cm}\#define {\bf \-T\-I\-M\-E\-R\-\_\-\-M\-A\-X\-\_\-\-C\-H\-A\-N\-N\-E\-L\-\_\-\-C\-A\-L\-L\-B\-A\-C\-K\-S}~8}}\label{timer_8h_abeca3fcbfd18e8e9df6806b1061c67fe}


\-Definition at line 29 of file timer.\-h.



\subsection{\-Typedef \-Documentation}
\hypertarget{timer_8h_a1d134e8a1c43ace1df8be568acbdd90a}{\index{timer.\-h@{timer.\-h}!timer\-\_\-callback\-\_\-t@{timer\-\_\-callback\-\_\-t}}
\index{timer\-\_\-callback\-\_\-t@{timer\-\_\-callback\-\_\-t}!timer.h@{timer.\-h}}
\subsubsection[{timer\-\_\-callback\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$ {\bf timer\-\_\-callback\-\_\-t})(void $\ast$pdata)}}\label{timer_8h_a1d134e8a1c43ace1df8be568acbdd90a}


\-Definition at line 36 of file timer.\-h.



\subsection{\-Enumeration \-Type \-Documentation}
\hypertarget{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10}{\index{timer.\-h@{timer.\-h}!timer\-\_\-channel\-\_\-t@{timer\-\_\-channel\-\_\-t}}
\index{timer\-\_\-channel\-\_\-t@{timer\-\_\-channel\-\_\-t}!timer.h@{timer.\-h}}
\subsubsection[{timer\-\_\-channel\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf timer\-\_\-channel\-\_\-t}}}\label{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10}
\begin{Desc}
\item[\-Enumerator\-: ]\par
\begin{description}
\index{timer\-\_\-sched@{timer\-\_\-sched}!timer.\-h@{timer.\-h}}\index{timer.\-h@{timer.\-h}!timer\-\_\-sched@{timer\-\_\-sched}}\item[{\em 
\hypertarget{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10afdf33c33958337aadb7613ad58766d77}{timer\-\_\-sched}\label{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10afdf33c33958337aadb7613ad58766d77}
}]\index{\-T\-I\-M\-E\-R\-\_\-\-N\-U\-M\-\_\-\-M\-A\-X\-\_\-\-C\-H\-A\-N\-N\-E\-L\-S@{\-T\-I\-M\-E\-R\-\_\-\-N\-U\-M\-\_\-\-M\-A\-X\-\_\-\-C\-H\-A\-N\-N\-E\-L\-S}!timer.\-h@{timer.\-h}}\index{timer.\-h@{timer.\-h}!\-T\-I\-M\-E\-R\-\_\-\-N\-U\-M\-\_\-\-M\-A\-X\-\_\-\-C\-H\-A\-N\-N\-E\-L\-S@{\-T\-I\-M\-E\-R\-\_\-\-N\-U\-M\-\_\-\-M\-A\-X\-\_\-\-C\-H\-A\-N\-N\-E\-L\-S}}\item[{\em 
\hypertarget{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10ac3fa8162a3526a578374e198845ce9ad}{\-T\-I\-M\-E\-R\-\_\-\-N\-U\-M\-\_\-\-M\-A\-X\-\_\-\-C\-H\-A\-N\-N\-E\-L\-S}\label{timer_8h_a6bb52d3cbff513eadd58a6e79de3aa10ac3fa8162a3526a578374e198845ce9ad}
}]\end{description}
\end{Desc}



\-Definition at line 31 of file timer.\-h.


\begin{DoxyCode}
            {
    timer_sched = 0,
    TIMER_NUM_MAX_CHANNELS
} timer_channel_t;
\end{DoxyCode}


\subsection{\-Function \-Documentation}
\hypertarget{timer_8h_a635561dc3a7636a6049bacc814d04dec}{\index{timer.\-h@{timer.\-h}!timer\-\_\-add\-\_\-callback@{timer\-\_\-add\-\_\-callback}}
\index{timer\-\_\-add\-\_\-callback@{timer\-\_\-add\-\_\-callback}!timer.h@{timer.\-h}}
\subsubsection[{timer\-\_\-add\-\_\-callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf hvmm\-\_\-status\-\_\-t} {\bf timer\-\_\-add\-\_\-callback} (
\begin{DoxyParamCaption}
\item[{{\bf timer\-\_\-channel\-\_\-t}}]{channel, }
\item[{{\bf timer\-\_\-callback\-\_\-t}}]{handler}
\end{DoxyParamCaption}
)}}\label{timer_8h_a635561dc3a7636a6049bacc814d04dec}


\-Definition at line 87 of file timer.\-c.


\begin{DoxyCode}
{
    int i;
    hvmm_status_t result = HVMM_STATUS_BUSY;
    for( i = 0; i < TIMER_MAX_CHANNEL_CALLBACKS; i++ ) {
        if( _channels[channel].callbacks[i] == 0 ) {
            _channels[channel].callbacks[i] = callback;
            result = HVMM_STATUS_SUCCESS;
            break;
        }
    }
    return result;
}
\end{DoxyCode}
\hypertarget{timer_8h_a3b91c51947e6979ee6c4f59166aff767}{\index{timer.\-h@{timer.\-h}!timer\-\_\-get\-\_\-interval@{timer\-\_\-get\-\_\-interval}}
\index{timer\-\_\-get\-\_\-interval@{timer\-\_\-get\-\_\-interval}!timer.h@{timer.\-h}}
\subsubsection[{timer\-\_\-get\-\_\-interval}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\-\_\-t} {\bf timer\-\_\-get\-\_\-interval} (
\begin{DoxyParamCaption}
\item[{{\bf timer\-\_\-channel\-\_\-t}}]{channel}
\end{DoxyParamCaption}
)}}\label{timer_8h_a3b91c51947e6979ee6c4f59166aff767}


\-Definition at line 82 of file timer.\-c.


\begin{DoxyCode}
{
    return _channels[channel].interval_us;
}
\end{DoxyCode}
\hypertarget{timer_8h_a833062839177da96d1c10cafd66fb5e3}{\index{timer.\-h@{timer.\-h}!timer\-\_\-init@{timer\-\_\-init}}
\index{timer\-\_\-init@{timer\-\_\-init}!timer.h@{timer.\-h}}
\subsubsection[{timer\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf hvmm\-\_\-status\-\_\-t} {\bf timer\-\_\-init} (
\begin{DoxyParamCaption}
\item[{{\bf timer\-\_\-channel\-\_\-t}}]{channel}
\end{DoxyParamCaption}
)}}\label{timer_8h_a833062839177da96d1c10cafd66fb5e3}


\-Definition at line 43 of file timer.\-c.


\begin{DoxyCode}
{   
    int i;
    for( i = 0; i < TIMER_MAX_CHANNEL_CALLBACKS; i++ ) {
        _channels[channel].callbacks[i] = 0;
    }

    generic_timer_init();
    return HVMM_STATUS_SUCCESS;
}
\end{DoxyCode}


\-Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=266pt]{timer_8h_a833062839177da96d1c10cafd66fb5e3_cgraph}
\end{center}
\end{figure}


\hypertarget{timer_8h_a4371fe74ccc70da5f9a99313a57d5034}{\index{timer.\-h@{timer.\-h}!timer\-\_\-remove\-\_\-callback@{timer\-\_\-remove\-\_\-callback}}
\index{timer\-\_\-remove\-\_\-callback@{timer\-\_\-remove\-\_\-callback}!timer.h@{timer.\-h}}
\subsubsection[{timer\-\_\-remove\-\_\-callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf hvmm\-\_\-status\-\_\-t} {\bf timer\-\_\-remove\-\_\-callback} (
\begin{DoxyParamCaption}
\item[{{\bf timer\-\_\-channel\-\_\-t}}]{channel, }
\item[{{\bf timer\-\_\-callback\-\_\-t}}]{handler}
\end{DoxyParamCaption}
)}}\label{timer_8h_a4371fe74ccc70da5f9a99313a57d5034}


\-Definition at line 101 of file timer.\-c.


\begin{DoxyCode}
{
    int i;
    hvmm_status_t result = HVMM_STATUS_NOT_FOUND;
    for( i = 0; i < TIMER_MAX_CHANNEL_CALLBACKS; i++ ) {
        if ( _channels[channel].callbacks[i] == callback ) {
            _channels[channel].callbacks[i] = 0;
            result = HVMM_STATUS_SUCCESS;
            break;
        }
    }
    return result;
}
\end{DoxyCode}
\hypertarget{timer_8h_a0be875a55b17ab6db30adc87ce373f47}{\index{timer.\-h@{timer.\-h}!timer\-\_\-set\-\_\-interval@{timer\-\_\-set\-\_\-interval}}
\index{timer\-\_\-set\-\_\-interval@{timer\-\_\-set\-\_\-interval}!timer.h@{timer.\-h}}
\subsubsection[{timer\-\_\-set\-\_\-interval}]{\setlength{\rightskip}{0pt plus 5cm}{\bf hvmm\-\_\-status\-\_\-t} {\bf timer\-\_\-set\-\_\-interval} (
\begin{DoxyParamCaption}
\item[{{\bf timer\-\_\-channel\-\_\-t}}]{channel, }
\item[{{\bf uint32\-\_\-t}}]{interval\-\_\-us}
\end{DoxyParamCaption}
)}}\label{timer_8h_a0be875a55b17ab6db30adc87ce373f47}


\-Definition at line 76 of file timer.\-c.


\begin{DoxyCode}
{
    _channels[channel].interval_us = timer_t2c(interval_us);
    return HVMM_STATUS_SUCCESS;
}
\end{DoxyCode}


\-Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=268pt]{timer_8h_a0be875a55b17ab6db30adc87ce373f47_cgraph}
\end{center}
\end{figure}


\hypertarget{timer_8h_ace4fc5a149dad9e3b44a629ad79a0732}{\index{timer.\-h@{timer.\-h}!timer\-\_\-start@{timer\-\_\-start}}
\index{timer\-\_\-start@{timer\-\_\-start}!timer.h@{timer.\-h}}
\subsubsection[{timer\-\_\-start}]{\setlength{\rightskip}{0pt plus 5cm}{\bf hvmm\-\_\-status\-\_\-t} {\bf timer\-\_\-start} (
\begin{DoxyParamCaption}
\item[{{\bf timer\-\_\-channel\-\_\-t}}]{channel}
\end{DoxyParamCaption}
)}}\label{timer_8h_ace4fc5a149dad9e3b44a629ad79a0732}


\-Definition at line 54 of file timer.\-c.


\begin{DoxyCode}
{
    if ( _timer_channel_num_callbacks( channel ) > 0 ) {

        generic_timer_set_callback(GENERIC_TIMER_HYP, &_timer_hw_callback );
    
        generic_timer_set_tval(GENERIC_TIMER_HYP, _channels[channel].
      interval_us);
    
        generic_timer_enable_irq(GENERIC_TIMER_HYP);

        generic_timer_enable_int(GENERIC_TIMER_HYP);
    }

    return HVMM_STATUS_SUCCESS;
}
\end{DoxyCode}


\-Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{timer_8h_ace4fc5a149dad9e3b44a629ad79a0732_cgraph}
\end{center}
\end{figure}


\hypertarget{timer_8h_afa821ebfe5739346936da29aafc27f09}{\index{timer.\-h@{timer.\-h}!timer\-\_\-stop@{timer\-\_\-stop}}
\index{timer\-\_\-stop@{timer\-\_\-stop}!timer.h@{timer.\-h}}
\subsubsection[{timer\-\_\-stop}]{\setlength{\rightskip}{0pt plus 5cm}{\bf hvmm\-\_\-status\-\_\-t} {\bf timer\-\_\-stop} (
\begin{DoxyParamCaption}
\item[{{\bf timer\-\_\-channel\-\_\-t}}]{channel}
\end{DoxyParamCaption}
)}}\label{timer_8h_afa821ebfe5739346936da29aafc27f09}


\-Definition at line 70 of file timer.\-c.


\begin{DoxyCode}
{
    generic_timer_disable_int(GENERIC_TIMER_HYP);
    return HVMM_STATUS_SUCCESS;
}
\end{DoxyCode}


\-Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{timer_8h_afa821ebfe5739346936da29aafc27f09_cgraph}
\end{center}
\end{figure}


\hypertarget{timer_8h_af519d8d7c7657dd067bc07e0b4871d0d}{\index{timer.\-h@{timer.\-h}!timer\-\_\-t2c@{timer\-\_\-t2c}}
\index{timer\-\_\-t2c@{timer\-\_\-t2c}!timer.h@{timer.\-h}}
\subsubsection[{timer\-\_\-t2c}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint64\-\_\-t} {\bf timer\-\_\-t2c} (
\begin{DoxyParamCaption}
\item[{{\bf uint64\-\_\-t}}]{time\-\_\-us}
\end{DoxyParamCaption}
)}}\label{timer_8h_af519d8d7c7657dd067bc07e0b4871d0d}


\-Definition at line 115 of file timer.\-c.


\begin{DoxyCode}
{
    return time_us * COUNT_PER_USEC;
}
\end{DoxyCode}
