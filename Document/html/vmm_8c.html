<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>khypervisor: vmm.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">khypervisor
   &#160;<span id="projectnumber">v1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">vmm.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;k-hypervisor-config.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="arch__types_8h_source.html">arch_types.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="vmm_8h_source.html">vmm.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="armv7__p15_8h_source.html">armv7_p15.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="hvmm__trace_8h_source.html">hvmm_trace.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="gic__regs_8h_source.html">gic_regs.h</a>&gt;</code><br/>
<code>#include &lt;config/cfg_platform.h&gt;</code><br/>
<code>#include &lt;log/print.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for vmm.c:</div>
<div class="dyncontent">
<div class="center"><img src="vmm_8c__incl.png" border="0" usemap="#vmm_8c" alt=""/></div>
<map name="vmm_8c" id="vmm_8c">
<area shape="rect" id="node5" href="arch__types_8h.html" title="arch_types.h" alt="" coords="279,237,375,267"/><area shape="rect" id="node7" href="vmm_8h.html" title="vmm.h" alt="" coords="297,83,359,112"/><area shape="rect" id="node15" href="armv7__p15_8h.html" title="armv7_p15.h" alt="" coords="432,160,528,189"/><area shape="rect" id="node18" href="hvmm__trace_8h.html" title="hvmm_trace.h" alt="" coords="433,83,537,112"/><area shape="rect" id="node22" href="gic__regs_8h.html" title="gic_regs.h" alt="" coords="561,83,644,112"/><area shape="rect" id="node9" href="hvmm__types_8h.html" title="hvmm_types.h" alt="" coords="221,160,328,189"/><area shape="rect" id="node12" href="lpae_8h.html" title="lpae.h" alt="" coords="352,160,408,189"/></map>
</div>
</div>
<p><a href="vmm_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmemmap__desc.html">memmap_desc</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a5c9ff23fc55b3880b7711374b2c6ed2c">VMM_L1_PTE_NUM</a>&#160;&#160;&#160;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#ad17b9e7ea6e5fc336dcc13c67e5af25b">VMM_L1_PADDING_PTE_NUM</a>&#160;&#160;&#160;(512 - <a class="el" href="vmm_8c.html#a5c9ff23fc55b3880b7711374b2c6ed2c">VMM_L1_PTE_NUM</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#ac8e7b4467a0918b25fc587bb5eebf49c">VMM_L2_PTE_NUM</a>&#160;&#160;&#160;512</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a83c3649efe1790c46a003114d043804a">VMM_L3_PTE_NUM</a>&#160;&#160;&#160;512</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a870261ca6011b676eb30ecfe82cba3c4">VMM_L2L3_PTE_NUM_TOTAL</a>&#160;&#160;&#160;(<a class="el" href="vmm_8c.html#ac8e7b4467a0918b25fc587bb5eebf49c">VMM_L2_PTE_NUM</a> * <a class="el" href="vmm_8c.html#a83c3649efe1790c46a003114d043804a">VMM_L3_PTE_NUM</a> + <a class="el" href="vmm_8c.html#ac8e7b4467a0918b25fc587bb5eebf49c">VMM_L2_PTE_NUM</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a688dcab9622be915add1142e443765af">VMM_PTE_NUM_TOTAL</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a0c989f6abba867b8e096680b743ec2bb">VTTBR_INITVAL</a>&#160;&#160;&#160;0x0000000000000000ULL</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a51957d8f1ea0f906cb820566d2e6ac13">VTTBR_VMID_MASK</a>&#160;&#160;&#160;0x00FF000000000000ULL</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#adc8f291db26100706ad7043e243b3d90">VTTBR_VMID_SHIFT</a>&#160;&#160;&#160;48</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a4501b8c9d5eb0090c0d25441720e3fa9">VTTBR_BADDR_MASK</a>&#160;&#160;&#160;0x000000FFFFFFF000ULL</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a982e014fa0268dd1b0a5e5be293a8ae5">VTTBR_BADDR_SHIFT</a>&#160;&#160;&#160;12</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a9a20ace708d1b6337a9566d642935539">VTCR_INITVAL</a>&#160;&#160;&#160;0x80000000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#af7d5d0dc5a8977952e8aed205da6c304">VTCR_SH0_MASK</a>&#160;&#160;&#160;0x00003000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a3ba4842d356096b736ce33c9a24b7eef">VTCR_SH0_SHIFT</a>&#160;&#160;&#160;12</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a0e9815ab39112b056cedd5278369a820">VTCR_ORGN0_MASK</a>&#160;&#160;&#160;0x00000C00</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#ad376839c4dd58e59a2d87bb75dd8e255">VTCR_ORGN0_SHIFT</a>&#160;&#160;&#160;10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#aef6d731bf143ca17e85b3c20ffb45192">VTCR_IRGN0_MASK</a>&#160;&#160;&#160;0x00000300</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a8f5a4439ffca4389d3a459d26438dfba">VTCR_IRGN0_SHIFT</a>&#160;&#160;&#160;8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#adca291ecf73c449c91954d38537eaf1f">VTCR_SL0_MASK</a>&#160;&#160;&#160;0x000000C0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a6e3d36dfbedada46d5c28f629cab4711">VTCR_SL0_SHIFT</a>&#160;&#160;&#160;6</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#aea183379c627710b6ef76430f1e5ac7c">VTCR_S_MASK</a>&#160;&#160;&#160;0x00000010</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a0e7fdcac3ed330a548c0d042c9eabfc7">VTCR_S_SHIFT</a>&#160;&#160;&#160;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a37dec823405557e8738315f9dbf05456">VTCR_T0SZ_MASK</a>&#160;&#160;&#160;0x00000003</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#acf1945529379104ce3708b14ffa357af">VTCR_T0SZ_SHIFT</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#ab8a3dfcf3e8c3051219e7b45c27398bd">TTBL_L3</a>(ttbl_l2, index_l2)&#160;&#160;&#160;(&amp;ttbl_l2[<a class="el" href="vmm_8c.html#ac8e7b4467a0918b25fc587bb5eebf49c">VMM_L2_PTE_NUM</a> + (<a class="el" href="vmm_8c.html#a83c3649efe1790c46a003114d043804a">VMM_L3_PTE_NUM</a> * (index_l2))])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a167262f708f4cb3a5ce75a3bcd22b85f">TTBL_L2</a>(ttbl_l1, index_l1)&#160;&#160;&#160;(&amp;ttbl_l1[(<a class="el" href="vmm_8c.html#a5c9ff23fc55b3880b7711374b2c6ed2c">VMM_L1_PTE_NUM</a> + <a class="el" href="vmm_8c.html#ad17b9e7ea6e5fc336dcc13c67e5af25b">VMM_L1_PADDING_PTE_NUM</a>) + (<a class="el" href="vmm_8c.html#a870261ca6011b676eb30ecfe82cba3c4">VMM_L2L3_PTE_NUM_TOTAL</a> * (index_l1))])</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="unionlpaed__t.html">lpaed_t</a> _ttbl_guest0[<a class="el" href="vmm_8c.html#a688dcab9622be915add1142e443765af">VMM_PTE_NUM_TOTAL</a>]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a97063b985af7dad6fae4b4d7a8a69523">__attribute</a> ((__aligned__(4096)))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a180b5829894039ae4bc5e58d16892ab2">vmm_ttbl3_map</a> (<a class="el" href="unionlpaed__t.html">lpaed_t</a> *ttbl3, <a class="el" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> offset, <a class="el" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> pages, <a class="el" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> pa, <a class="el" href="lpae_8h.html#a05d556a9b3ba68a3bafcc96839956371">lpaed_stage2_memattr_t</a> mattr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#ade96e2f0eb8c3b27c184ea8498777b46">vmm_ttbl3_unmap</a> (<a class="el" href="unionlpaed__t.html">lpaed_t</a> *ttbl3, <a class="el" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> offset, <a class="el" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> pages)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a3960ecb54fc00d5ec5bb1cbe4ebf4e16">vmm_ttbl2_unmap</a> (<a class="el" href="unionlpaed__t.html">lpaed_t</a> *ttbl2, <a class="el" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> va_offset, <a class="el" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#ac7f3629c0263bf9be799744dedbe0100">vmm_ttbl2_map</a> (<a class="el" href="unionlpaed__t.html">lpaed_t</a> *ttbl2, <a class="el" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> va_offset, <a class="el" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> pa, <a class="el" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> size, <a class="el" href="lpae_8h.html#a05d556a9b3ba68a3bafcc96839956371">lpaed_stage2_memattr_t</a> mattr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a19aea725b1f8c73bce85b2fd5cd11da0">vmm_ttbl2_init_entries</a> (<a class="el" href="unionlpaed__t.html">lpaed_t</a> *ttbl2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#aadcc7470fc7393fa03ed15a350195fca">vmm_init_ttbl2</a> (<a class="el" href="unionlpaed__t.html">lpaed_t</a> *ttbl2, struct <a class="el" href="structmemmap__desc.html">memmap_desc</a> *md)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#af16a19da3c025dd4aaa0e40ae0bcb205">vmm_init_ttbl</a> (<a class="el" href="unionlpaed__t.html">lpaed_t</a> *ttbl, struct <a class="el" href="structmemmap__desc.html">memmap_desc</a> *mdlist[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a38fe20d83b4f1d4ceb4f7f9b737a6f2d">vmm_init_mmu</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a34e0e13c32b08fd108582567c29ccebf">vmm_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="unionlpaed__t.html">lpaed_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a269ada885aa7296fc4601e4cfe6a134b">vmm_vmid_ttbl</a> (<a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a> vmid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#aad790266948b8b547025a7a62006f0da">vmm_stage2_enable</a> (int enable)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#afee733063f1c9c6f9fa314492d1ffb11">vmm_set_vmid_ttbl</a> (<a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a> vmid, <a class="el" href="unionlpaed__t.html">lpaed_t</a> *ttbl)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a6834f1cdeb19fe290ffeb2f62394e5cd">guest_bin_start</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#ab6ae8dae234de686040fcd733765cdc5">guest2_bin_start</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="unionlpaed__t.html">lpaed_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a01ee9b39803516e895627447812e4ee1">_vmid_ttbl</a> [<a class="el" href="hyp__config_8h.html#a7fcfcbc766cea81a21e2d8aba3b54843">NUM_GUESTS_STATIC</a>]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmemmap__desc.html">memmap_desc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a36e85cb6296246e95073b1ee9e45abd2">guest_md_empty</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmemmap__desc.html">memmap_desc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#ac04a34d558fa50fcd48a6b62694049e3">guest_device_md0</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmemmap__desc.html">memmap_desc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a4065b8a2c64a98de1549a250d4a5ddba">guest_device_md1</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmemmap__desc.html">memmap_desc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a3d3790518e4334717071a39482dde8ec">guest_memory_md0</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmemmap__desc.html">memmap_desc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a2ecf2b20575bb082ed279e4094298656">guest_memory_md1</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmemmap__desc.html">memmap_desc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a0974e8331682cf4d953667cf4b24b4ee">guest_mdlist0</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmemmap__desc.html">memmap_desc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8c.html#a61961d5dffc30571d28cbb7b4cf5cb94">guest_mdlist1</a> []</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a167262f708f4cb3a5ce75a3bcd22b85f"></a><!-- doxytag: member="vmm.c::TTBL_L2" ref="a167262f708f4cb3a5ce75a3bcd22b85f" args="(ttbl_l1, index_l1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a167262f708f4cb3a5ce75a3bcd22b85f">TTBL_L2</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ttbl_l1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">index_l1&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(&amp;ttbl_l1[(<a class="el" href="vmm_8c.html#a5c9ff23fc55b3880b7711374b2c6ed2c">VMM_L1_PTE_NUM</a> + <a class="el" href="vmm_8c.html#ad17b9e7ea6e5fc336dcc13c67e5af25b">VMM_L1_PADDING_PTE_NUM</a>) + (<a class="el" href="vmm_8c.html#a870261ca6011b676eb30ecfe82cba3c4">VMM_L2L3_PTE_NUM_TOTAL</a> * (index_l1))])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00116">116</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab8a3dfcf3e8c3051219e7b45c27398bd"></a><!-- doxytag: member="vmm.c::TTBL_L3" ref="ab8a3dfcf3e8c3051219e7b45c27398bd" args="(ttbl_l2, index_l2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#ab8a3dfcf3e8c3051219e7b45c27398bd">TTBL_L3</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ttbl_l2, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">index_l2&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(&amp;ttbl_l2[<a class="el" href="vmm_8c.html#ac8e7b4467a0918b25fc587bb5eebf49c">VMM_L2_PTE_NUM</a> + (<a class="el" href="vmm_8c.html#a83c3649efe1790c46a003114d043804a">VMM_L3_PTE_NUM</a> * (index_l2))])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00115">115</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad17b9e7ea6e5fc336dcc13c67e5af25b"></a><!-- doxytag: member="vmm.c::VMM_L1_PADDING_PTE_NUM" ref="ad17b9e7ea6e5fc336dcc13c67e5af25b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#ad17b9e7ea6e5fc336dcc13c67e5af25b">VMM_L1_PADDING_PTE_NUM</a>&#160;&#160;&#160;(512 - <a class="el" href="vmm_8c.html#a5c9ff23fc55b3880b7711374b2c6ed2c">VMM_L1_PTE_NUM</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00015">15</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5c9ff23fc55b3880b7711374b2c6ed2c"></a><!-- doxytag: member="vmm.c::VMM_L1_PTE_NUM" ref="a5c9ff23fc55b3880b7711374b2c6ed2c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a5c9ff23fc55b3880b7711374b2c6ed2c">VMM_L1_PTE_NUM</a>&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00014">14</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac8e7b4467a0918b25fc587bb5eebf49c"></a><!-- doxytag: member="vmm.c::VMM_L2_PTE_NUM" ref="ac8e7b4467a0918b25fc587bb5eebf49c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#ac8e7b4467a0918b25fc587bb5eebf49c">VMM_L2_PTE_NUM</a>&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00017">17</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a870261ca6011b676eb30ecfe82cba3c4"></a><!-- doxytag: member="vmm.c::VMM_L2L3_PTE_NUM_TOTAL" ref="a870261ca6011b676eb30ecfe82cba3c4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a870261ca6011b676eb30ecfe82cba3c4">VMM_L2L3_PTE_NUM_TOTAL</a>&#160;&#160;&#160;(<a class="el" href="vmm_8c.html#ac8e7b4467a0918b25fc587bb5eebf49c">VMM_L2_PTE_NUM</a> * <a class="el" href="vmm_8c.html#a83c3649efe1790c46a003114d043804a">VMM_L3_PTE_NUM</a> + <a class="el" href="vmm_8c.html#ac8e7b4467a0918b25fc587bb5eebf49c">VMM_L2_PTE_NUM</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00019">19</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a83c3649efe1790c46a003114d043804a"></a><!-- doxytag: member="vmm.c::VMM_L3_PTE_NUM" ref="a83c3649efe1790c46a003114d043804a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a83c3649efe1790c46a003114d043804a">VMM_L3_PTE_NUM</a>&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00018">18</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a688dcab9622be915add1142e443765af"></a><!-- doxytag: member="vmm.c::VMM_PTE_NUM_TOTAL" ref="a688dcab9622be915add1142e443765af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a688dcab9622be915add1142e443765af">VMM_PTE_NUM_TOTAL</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="vmm_8c.html#a5c9ff23fc55b3880b7711374b2c6ed2c">VMM_L1_PTE_NUM</a> + <a class="code" href="vmm_8c.html#ad17b9e7ea6e5fc336dcc13c67e5af25b">VMM_L1_PADDING_PTE_NUM</a> + <a class="code" href="vmm_8c.html#a870261ca6011b676eb30ecfe82cba3c4">VMM_L2L3_PTE_NUM_TOTAL</a> \
                             * <a class="code" href="vmm_8c.html#a5c9ff23fc55b3880b7711374b2c6ed2c">VMM_L1_PTE_NUM</a>)
</pre></div>
<p>Definition at line <a class="el" href="vmm_8c_source.html#l00020">20</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9a20ace708d1b6337a9566d642935539"></a><!-- doxytag: member="vmm.c::VTCR_INITVAL" ref="a9a20ace708d1b6337a9566d642935539" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a9a20ace708d1b6337a9566d642935539">VTCR_INITVAL</a>&#160;&#160;&#160;0x80000000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00030">30</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="aef6d731bf143ca17e85b3c20ffb45192"></a><!-- doxytag: member="vmm.c::VTCR_IRGN0_MASK" ref="aef6d731bf143ca17e85b3c20ffb45192" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#aef6d731bf143ca17e85b3c20ffb45192">VTCR_IRGN0_MASK</a>&#160;&#160;&#160;0x00000300</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00035">35</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8f5a4439ffca4389d3a459d26438dfba"></a><!-- doxytag: member="vmm.c::VTCR_IRGN0_SHIFT" ref="a8f5a4439ffca4389d3a459d26438dfba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a8f5a4439ffca4389d3a459d26438dfba">VTCR_IRGN0_SHIFT</a>&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00036">36</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0e9815ab39112b056cedd5278369a820"></a><!-- doxytag: member="vmm.c::VTCR_ORGN0_MASK" ref="a0e9815ab39112b056cedd5278369a820" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a0e9815ab39112b056cedd5278369a820">VTCR_ORGN0_MASK</a>&#160;&#160;&#160;0x00000C00</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00033">33</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad376839c4dd58e59a2d87bb75dd8e255"></a><!-- doxytag: member="vmm.c::VTCR_ORGN0_SHIFT" ref="ad376839c4dd58e59a2d87bb75dd8e255" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#ad376839c4dd58e59a2d87bb75dd8e255">VTCR_ORGN0_SHIFT</a>&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00034">34</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="aea183379c627710b6ef76430f1e5ac7c"></a><!-- doxytag: member="vmm.c::VTCR_S_MASK" ref="aea183379c627710b6ef76430f1e5ac7c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#aea183379c627710b6ef76430f1e5ac7c">VTCR_S_MASK</a>&#160;&#160;&#160;0x00000010</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00039">39</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0e7fdcac3ed330a548c0d042c9eabfc7"></a><!-- doxytag: member="vmm.c::VTCR_S_SHIFT" ref="a0e7fdcac3ed330a548c0d042c9eabfc7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a0e7fdcac3ed330a548c0d042c9eabfc7">VTCR_S_SHIFT</a>&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00040">40</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="af7d5d0dc5a8977952e8aed205da6c304"></a><!-- doxytag: member="vmm.c::VTCR_SH0_MASK" ref="af7d5d0dc5a8977952e8aed205da6c304" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#af7d5d0dc5a8977952e8aed205da6c304">VTCR_SH0_MASK</a>&#160;&#160;&#160;0x00003000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00031">31</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3ba4842d356096b736ce33c9a24b7eef"></a><!-- doxytag: member="vmm.c::VTCR_SH0_SHIFT" ref="a3ba4842d356096b736ce33c9a24b7eef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a3ba4842d356096b736ce33c9a24b7eef">VTCR_SH0_SHIFT</a>&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00032">32</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="adca291ecf73c449c91954d38537eaf1f"></a><!-- doxytag: member="vmm.c::VTCR_SL0_MASK" ref="adca291ecf73c449c91954d38537eaf1f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#adca291ecf73c449c91954d38537eaf1f">VTCR_SL0_MASK</a>&#160;&#160;&#160;0x000000C0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00037">37</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6e3d36dfbedada46d5c28f629cab4711"></a><!-- doxytag: member="vmm.c::VTCR_SL0_SHIFT" ref="a6e3d36dfbedada46d5c28f629cab4711" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a6e3d36dfbedada46d5c28f629cab4711">VTCR_SL0_SHIFT</a>&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00038">38</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a37dec823405557e8738315f9dbf05456"></a><!-- doxytag: member="vmm.c::VTCR_T0SZ_MASK" ref="a37dec823405557e8738315f9dbf05456" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a37dec823405557e8738315f9dbf05456">VTCR_T0SZ_MASK</a>&#160;&#160;&#160;0x00000003</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00041">41</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="acf1945529379104ce3708b14ffa357af"></a><!-- doxytag: member="vmm.c::VTCR_T0SZ_SHIFT" ref="acf1945529379104ce3708b14ffa357af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#acf1945529379104ce3708b14ffa357af">VTCR_T0SZ_SHIFT</a>&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00042">42</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4501b8c9d5eb0090c0d25441720e3fa9"></a><!-- doxytag: member="vmm.c::VTTBR_BADDR_MASK" ref="a4501b8c9d5eb0090c0d25441720e3fa9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a4501b8c9d5eb0090c0d25441720e3fa9">VTTBR_BADDR_MASK</a>&#160;&#160;&#160;0x000000FFFFFFF000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00026">26</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a982e014fa0268dd1b0a5e5be293a8ae5"></a><!-- doxytag: member="vmm.c::VTTBR_BADDR_SHIFT" ref="a982e014fa0268dd1b0a5e5be293a8ae5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a982e014fa0268dd1b0a5e5be293a8ae5">VTTBR_BADDR_SHIFT</a>&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00027">27</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0c989f6abba867b8e096680b743ec2bb"></a><!-- doxytag: member="vmm.c::VTTBR_INITVAL" ref="a0c989f6abba867b8e096680b743ec2bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a0c989f6abba867b8e096680b743ec2bb">VTTBR_INITVAL</a>&#160;&#160;&#160;0x0000000000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00023">23</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a51957d8f1ea0f906cb820566d2e6ac13"></a><!-- doxytag: member="vmm.c::VTTBR_VMID_MASK" ref="a51957d8f1ea0f906cb820566d2e6ac13" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#a51957d8f1ea0f906cb820566d2e6ac13">VTTBR_VMID_MASK</a>&#160;&#160;&#160;0x00FF000000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00024">24</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="adc8f291db26100706ad7043e243b3d90"></a><!-- doxytag: member="vmm.c::VTTBR_VMID_SHIFT" ref="adc8f291db26100706ad7043e243b3d90" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="vmm_8c.html#adc8f291db26100706ad7043e243b3d90">VTTBR_VMID_SHIFT</a>&#160;&#160;&#160;48</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00025">25</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a97063b985af7dad6fae4b4d7a8a69523"></a><!-- doxytag: member="vmm.c::__attribute" ref="a97063b985af7dad6fae4b4d7a8a69523" args="((__aligned__(4096)))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="unionlpaed__t.html">lpaed_t</a> _ttbl_guest0 [<a class="el" href="vmm_8c.html#a688dcab9622be915add1142e443765af">VMM_PTE_NUM_TOTAL</a>] <a class="el" href="vmm_8c.html#a97063b985af7dad6fae4b4d7a8a69523">__attribute</a> </td>
          <td>(</td>
          <td class="paramtype">(__aligned__(4096))&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a34e0e13c32b08fd108582567c29ccebf"></a><!-- doxytag: member="vmm.c::vmm_init" ref="a34e0e13c32b08fd108582567c29ccebf" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="vmm_8h.html#a34e0e13c32b08fd108582567c29ccebf">vmm_init</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00339">339</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">/*</span>
<span class="comment">     * Initializes Translation Table for Stage2 Translation (IPA -&gt; PA)</span>
<span class="comment">     */</span>
    <span class="keywordtype">int</span> i;

    <a class="code" href="hvmm__trace_8h.html#afd02d86121dd2e186b6240f52df4c716">HVMM_TRACE_ENTER</a>();
    <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code" href="hyp__config_8h.html#a7fcfcbc766cea81a21e2d8aba3b54843">NUM_GUESTS_STATIC</a>; i++ ) {
        <a class="code" href="vmm_8c.html#a01ee9b39803516e895627447812e4ee1">_vmid_ttbl</a>[i] = 0;
    }

    <a class="code" href="vmm_8c.html#a01ee9b39803516e895627447812e4ee1">_vmid_ttbl</a>[0] = &amp;_ttbl_guest0[0];
    <a class="code" href="vmm_8c.html#a01ee9b39803516e895627447812e4ee1">_vmid_ttbl</a>[1] = &amp;_ttbl_guest1[0];


    <span class="comment">/*</span>
<span class="comment">     * VA: 0x00000000 ~ 0x3FFFFFFF,   1GB</span>
<span class="comment">     * PA: 0xA0000000 ~ 0xDFFFFFFF    guest_bin_start</span>
<span class="comment">     * PA: 0xB0000000 ~ 0xEFFFFFFF    guest2_bin_start</span>
<span class="comment">     */</span>

    <a class="code" href="vmm_8c.html#a3d3790518e4334717071a39482dde8ec">guest_memory_md0</a>[0].<a class="code" href="structmemmap__desc.html#ac3bd9bdf9d7c837b3f990461d5c7fb19">pa</a> = (<a class="code" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>) ((<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) &amp;<a class="code" href="vmm_8c.html#a6834f1cdeb19fe290ffeb2f62394e5cd">guest_bin_start</a>);
    <a class="code" href="vmm_8c.html#a2ecf2b20575bb082ed279e4094298656">guest_memory_md1</a>[0].<a class="code" href="structmemmap__desc.html#ac3bd9bdf9d7c837b3f990461d5c7fb19">pa</a> = (<a class="code" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>) ((<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) &amp;<a class="code" href="vmm_8c.html#ab6ae8dae234de686040fcd733765cdc5">guest2_bin_start</a>);

    <a class="code" href="vmm_8c.html#af16a19da3c025dd4aaa0e40ae0bcb205">vmm_init_ttbl</a>(&amp;_ttbl_guest0[0], &amp;<a class="code" href="vmm_8c.html#a0974e8331682cf4d953667cf4b24b4ee">guest_mdlist0</a>[0]);
    <a class="code" href="vmm_8c.html#af16a19da3c025dd4aaa0e40ae0bcb205">vmm_init_ttbl</a>(&amp;_ttbl_guest1[0], &amp;<a class="code" href="vmm_8c.html#a61961d5dffc30571d28cbb7b4cf5cb94">guest_mdlist1</a>[0]);
   
    <a class="code" href="vmm_8c.html#a38fe20d83b4f1d4ceb4f7f9b737a6f2d">vmm_init_mmu</a>();

    <a class="code" href="hvmm__trace_8h.html#a9b123d92a0aece2a4900afdc8ab8016f">HVMM_TRACE_EXIT</a>();
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vmm_8c_a34e0e13c32b08fd108582567c29ccebf_cgraph.png" border="0" usemap="#vmm_8c_a34e0e13c32b08fd108582567c29ccebf_cgraph" alt=""/></div>
<map name="vmm_8c_a34e0e13c32b08fd108582567c29ccebf_cgraph" id="vmm_8c_a34e0e13c32b08fd108582567c29ccebf_cgraph">
<area shape="rect" id="node3" href="vmm_8c.html#af16a19da3c025dd4aaa0e40ae0bcb205" title="vmm_init_ttbl" alt="" coords="135,32,233,61"/><area shape="rect" id="node25" href="vmm_8c.html#a38fe20d83b4f1d4ceb4f7f9b737a6f2d" title="vmm_init_mmu" alt="" coords="129,85,239,115"/><area shape="rect" id="node5" href="lpae_8c.html#ae7e55ecf2bf23e4f97618e990b61159d" title="lpaed_stage2_conf_l1_table" alt="" coords="289,5,471,35"/><area shape="rect" id="node7" href="vmm_8c.html#aadcc7470fc7393fa03ed15a350195fca" title="vmm_init_ttbl2" alt="" coords="327,59,433,88"/><area shape="rect" id="node9" href="vmm_8c.html#a19aea725b1f8c73bce85b2fd5cd11da0" title="vmm_ttbl2_init_entries" alt="" coords="521,5,673,35"/><area shape="rect" id="node13" href="vmm_8c.html#a3960ecb54fc00d5ec5bb1cbe4ebf4e16" title="vmm_ttbl2_unmap" alt="" coords="533,59,661,88"/><area shape="rect" id="node17" href="vmm_8c.html#ac7f3629c0263bf9be799744dedbe0100" title="vmm_ttbl2_map" alt="" coords="540,112,655,141"/><area shape="rect" id="node11" href="lpae_8c.html#ad87d6a55d9a4301257cc7efe32ad0153" title="lpaed_stage2_conf_l2_table" alt="" coords="731,5,912,35"/><area shape="rect" id="node15" href="vmm_8c.html#ade96e2f0eb8c3b27c184ea8498777b46" title="vmm_ttbl3_unmap" alt="" coords="757,59,885,88"/><area shape="rect" id="node19" href="vmm_8c.html#a180b5829894039ae4bc5e58d16892ab2" title="vmm_ttbl3_map" alt="" coords="764,112,879,141"/><area shape="rect" id="node23" href="lpae_8c.html#abfb766e3ac67185b6e435f24b3223527" title="lpaed_stage2_enable_l2_table" alt="" coords="724,165,919,195"/><area shape="rect" id="node21" href="lpae_8c.html#aff0ed5c291334c705ddbd99f197e1247" title="lpaed_stage2_map_page" alt="" coords="969,112,1135,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a38fe20d83b4f1d4ceb4f7f9b737a6f2d"></a><!-- doxytag: member="vmm.c::vmm_init_mmu" ref="a38fe20d83b4f1d4ceb4f7f9b737a6f2d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="vmm_8c.html#a38fe20d83b4f1d4ceb4f7f9b737a6f2d">vmm_init_mmu</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00306">306</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> vtcr, vttbr;

    <a class="code" href="hvmm__trace_8h.html#afd02d86121dd2e186b6240f52df4c716">HVMM_TRACE_ENTER</a>();

    vtcr = <a class="code" href="armv7__p15_8h.html#a228f19aa25c4d23dee8a0be5b41691d9">read_vtcr</a>(); uart_print( <span class="stringliteral">&quot;vtcr:&quot;</span>); uart_print_hex32(vtcr); uart_print(<span class="stringliteral">&quot;\n\r&quot;</span>);

    <span class="comment">// start lookup at level 1 table</span>
    vtcr &amp;= ~<a class="code" href="vmm_8c.html#adca291ecf73c449c91954d38537eaf1f">VTCR_SL0_MASK</a>;
    vtcr |= (0x01 &lt;&lt; <a class="code" href="vmm_8c.html#a6e3d36dfbedada46d5c28f629cab4711">VTCR_SL0_SHIFT</a>) &amp; <a class="code" href="vmm_8c.html#adca291ecf73c449c91954d38537eaf1f">VTCR_SL0_MASK</a>;
    vtcr &amp;= ~<a class="code" href="vmm_8c.html#a0e9815ab39112b056cedd5278369a820">VTCR_ORGN0_MASK</a>;
    vtcr |= (0x3 &lt;&lt; <a class="code" href="vmm_8c.html#ad376839c4dd58e59a2d87bb75dd8e255">VTCR_ORGN0_SHIFT</a>) &amp; <a class="code" href="vmm_8c.html#a0e9815ab39112b056cedd5278369a820">VTCR_ORGN0_MASK</a>;
    vtcr &amp;= ~<a class="code" href="vmm_8c.html#aef6d731bf143ca17e85b3c20ffb45192">VTCR_IRGN0_MASK</a>;
    vtcr |= (0x3 &lt;&lt; <a class="code" href="vmm_8c.html#a8f5a4439ffca4389d3a459d26438dfba">VTCR_IRGN0_SHIFT</a>) &amp; <a class="code" href="vmm_8c.html#aef6d731bf143ca17e85b3c20ffb45192">VTCR_IRGN0_MASK</a>;
    <a class="code" href="armv7__p15_8h.html#a3982aeb15e1c94c960d0d0fdec2a4486">write_vtcr</a>(vtcr);
    vtcr = <a class="code" href="armv7__p15_8h.html#a228f19aa25c4d23dee8a0be5b41691d9">read_vtcr</a>(); uart_print( <span class="stringliteral">&quot;vtcr:&quot;</span>); uart_print_hex32(vtcr); uart_print(<span class="stringliteral">&quot;\n\r&quot;</span>);
    {
        <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> sl0 = (vtcr &amp; <a class="code" href="vmm_8c.html#adca291ecf73c449c91954d38537eaf1f">VTCR_SL0_MASK</a>) &gt;&gt; <a class="code" href="vmm_8c.html#a6e3d36dfbedada46d5c28f629cab4711">VTCR_SL0_SHIFT</a>;
        <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> t0sz = vtcr &amp; 0xF;
        <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> baddr_x = (sl0 == 0 ? 14 - t0sz : 5 - t0sz);
        uart_print( <span class="stringliteral">&quot;vttbr.baddr.x:&quot;</span>); uart_print_hex32(baddr_x); uart_print(<span class="stringliteral">&quot;\n\r&quot;</span>);
    }
<span class="comment">// VTTBR</span>
    vttbr = <a class="code" href="armv7__p15_8h.html#a4e4681628f215ab9436d9376e67ec931">read_vttbr</a>(); uart_print( <span class="stringliteral">&quot;vttbr:&quot;</span> ); uart_print_hex64(vttbr); uart_print(<span class="stringliteral">&quot;\n\r&quot;</span>);

    <a class="code" href="hvmm__trace_8h.html#a9b123d92a0aece2a4900afdc8ab8016f">HVMM_TRACE_EXIT</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="af16a19da3c025dd4aaa0e40ae0bcb205"></a><!-- doxytag: member="vmm.c::vmm_init_ttbl" ref="af16a19da3c025dd4aaa0e40ae0bcb205" args="(lpaed_t *ttbl, struct memmap_desc *mdlist[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="vmm_8c.html#af16a19da3c025dd4aaa0e40ae0bcb205">vmm_init_ttbl</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionlpaed__t.html">lpaed_t</a> *&#160;</td>
          <td class="paramname"><em>ttbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmemmap__desc.html">memmap_desc</a> *&#160;</td>
          <td class="paramname"><em>mdlist</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00285">285</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> i = 0;
    <a class="code" href="hvmm__trace_8h.html#afd02d86121dd2e186b6240f52df4c716">HVMM_TRACE_ENTER</a>();

    <span class="keywordflow">while</span>(mdlist[i]) {
        <span class="keyword">struct </span><a class="code" href="structmemmap__desc.html">memmap_desc</a> *md = mdlist[i];

        <span class="keywordflow">if</span> ( md[0].<a class="code" href="structmemmap__desc.html#acf60de4c64d60c1b9449c056bc6bfcf7">label</a> == 0 ) {
            <a class="code" href="lpae_8c.html#ae7e55ecf2bf23e4f97618e990b61159d">lpaed_stage2_conf_l1_table</a>(&amp;ttbl[i], 0, 0);
        } <span class="keywordflow">else</span> {
            <a class="code" href="lpae_8c.html#ae7e55ecf2bf23e4f97618e990b61159d">lpaed_stage2_conf_l1_table</a>(&amp;ttbl[i], (<a class="code" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>) ((<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) <a class="code" href="vmm_8c.html#a167262f708f4cb3a5ce75a3bcd22b85f">TTBL_L2</a>(ttbl, i)), 1);
            <a class="code" href="vmm_8c.html#aadcc7470fc7393fa03ed15a350195fca">vmm_init_ttbl2</a>(<a class="code" href="vmm_8c.html#a167262f708f4cb3a5ce75a3bcd22b85f">TTBL_L2</a>(ttbl, i), md);
        }
        i++;
    }

    <a class="code" href="hvmm__trace_8h.html#a9b123d92a0aece2a4900afdc8ab8016f">HVMM_TRACE_EXIT</a>();
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vmm_8c_af16a19da3c025dd4aaa0e40ae0bcb205_cgraph.png" border="0" usemap="#vmm_8c_af16a19da3c025dd4aaa0e40ae0bcb205_cgraph" alt=""/></div>
<map name="vmm_8c_af16a19da3c025dd4aaa0e40ae0bcb205_cgraph" id="vmm_8c_af16a19da3c025dd4aaa0e40ae0bcb205_cgraph">
<area shape="rect" id="node3" href="lpae_8c.html#ae7e55ecf2bf23e4f97618e990b61159d" title="lpaed_stage2_conf_l1_table" alt="" coords="156,5,337,35"/><area shape="rect" id="node5" href="vmm_8c.html#aadcc7470fc7393fa03ed15a350195fca" title="vmm_init_ttbl2" alt="" coords="193,59,300,88"/><area shape="rect" id="node7" href="vmm_8c.html#a19aea725b1f8c73bce85b2fd5cd11da0" title="vmm_ttbl2_init_entries" alt="" coords="388,5,540,35"/><area shape="rect" id="node11" href="vmm_8c.html#a3960ecb54fc00d5ec5bb1cbe4ebf4e16" title="vmm_ttbl2_unmap" alt="" coords="400,59,528,88"/><area shape="rect" id="node15" href="vmm_8c.html#ac7f3629c0263bf9be799744dedbe0100" title="vmm_ttbl2_map" alt="" coords="407,112,521,141"/><area shape="rect" id="node9" href="lpae_8c.html#ad87d6a55d9a4301257cc7efe32ad0153" title="lpaed_stage2_conf_l2_table" alt="" coords="597,5,779,35"/><area shape="rect" id="node13" href="vmm_8c.html#ade96e2f0eb8c3b27c184ea8498777b46" title="vmm_ttbl3_unmap" alt="" coords="624,59,752,88"/><area shape="rect" id="node17" href="vmm_8c.html#a180b5829894039ae4bc5e58d16892ab2" title="vmm_ttbl3_map" alt="" coords="631,112,745,141"/><area shape="rect" id="node21" href="lpae_8c.html#abfb766e3ac67185b6e435f24b3223527" title="lpaed_stage2_enable_l2_table" alt="" coords="591,165,785,195"/><area shape="rect" id="node19" href="lpae_8c.html#aff0ed5c291334c705ddbd99f197e1247" title="lpaed_stage2_map_page" alt="" coords="836,112,1001,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aadcc7470fc7393fa03ed15a350195fca"></a><!-- doxytag: member="vmm.c::vmm_init_ttbl2" ref="aadcc7470fc7393fa03ed15a350195fca" args="(lpaed_t *ttbl2, struct memmap_desc *md)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="vmm_8c.html#aadcc7470fc7393fa03ed15a350195fca">vmm_init_ttbl2</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionlpaed__t.html">lpaed_t</a> *&#160;</td>
          <td class="paramname"><em>ttbl2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmemmap__desc.html">memmap_desc</a> *&#160;</td>
          <td class="paramname"><em>md</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00264">264</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> i = 0;
    <a class="code" href="hvmm__trace_8h.html#afd02d86121dd2e186b6240f52df4c716">HVMM_TRACE_ENTER</a>();
    printh( <span class="stringliteral">&quot; - ttbl2:%x\n&quot;</span>, (<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) ttbl2 );
    <span class="keywordflow">if</span> ( ((<a class="code" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>) ( (<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) ttbl2) ) &amp; 0x0FFFULL ) {
        printh( <span class="stringliteral">&quot; - error: invalid ttbl2 address alignment\n&quot;</span> );
    }

    <span class="comment">/* construct l2-l3 table hirerachy with invalid pages */</span>
    <a class="code" href="vmm_8c.html#a19aea725b1f8c73bce85b2fd5cd11da0">vmm_ttbl2_init_entries</a>(ttbl2);

    <a class="code" href="vmm_8c.html#a3960ecb54fc00d5ec5bb1cbe4ebf4e16">vmm_ttbl2_unmap</a>( ttbl2, 0x00000000, 0x40000000 );

    <span class="keywordflow">while</span>(md[i].<a class="code" href="structmemmap__desc.html#acf60de4c64d60c1b9449c056bc6bfcf7">label</a> != 0) {
        <a class="code" href="vmm_8c.html#ac7f3629c0263bf9be799744dedbe0100">vmm_ttbl2_map</a>(ttbl2, md[i].<a class="code" href="structmemmap__desc.html#a95ee4f2c3d5eef08e655768b207f5d61">va</a>, md[i].<a class="code" href="structmemmap__desc.html#ac3bd9bdf9d7c837b3f990461d5c7fb19">pa</a>, md[i].<a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a>, md[i].<a class="code" href="structmemmap__desc.html#aa13b236533a7e5005e2272face6b512d">attr</a> );
        i++;
    }
    <a class="code" href="hvmm__trace_8h.html#a9b123d92a0aece2a4900afdc8ab8016f">HVMM_TRACE_EXIT</a>();
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vmm_8c_aadcc7470fc7393fa03ed15a350195fca_cgraph.png" border="0" usemap="#vmm_8c_aadcc7470fc7393fa03ed15a350195fca_cgraph" alt=""/></div>
<map name="vmm_8c_aadcc7470fc7393fa03ed15a350195fca_cgraph" id="vmm_8c_aadcc7470fc7393fa03ed15a350195fca_cgraph">
<area shape="rect" id="node3" href="vmm_8c.html#a19aea725b1f8c73bce85b2fd5cd11da0" title="vmm_ttbl2_init_entries" alt="" coords="161,5,313,35"/><area shape="rect" id="node7" href="vmm_8c.html#a3960ecb54fc00d5ec5bb1cbe4ebf4e16" title="vmm_ttbl2_unmap" alt="" coords="173,59,301,88"/><area shape="rect" id="node11" href="vmm_8c.html#ac7f3629c0263bf9be799744dedbe0100" title="vmm_ttbl2_map" alt="" coords="180,112,295,141"/><area shape="rect" id="node5" href="lpae_8c.html#ad87d6a55d9a4301257cc7efe32ad0153" title="lpaed_stage2_conf_l2_table" alt="" coords="371,5,552,35"/><area shape="rect" id="node9" href="vmm_8c.html#ade96e2f0eb8c3b27c184ea8498777b46" title="vmm_ttbl3_unmap" alt="" coords="397,59,525,88"/><area shape="rect" id="node13" href="vmm_8c.html#a180b5829894039ae4bc5e58d16892ab2" title="vmm_ttbl3_map" alt="" coords="404,112,519,141"/><area shape="rect" id="node17" href="lpae_8c.html#abfb766e3ac67185b6e435f24b3223527" title="lpaed_stage2_enable_l2_table" alt="" coords="364,165,559,195"/><area shape="rect" id="node15" href="lpae_8c.html#aff0ed5c291334c705ddbd99f197e1247" title="lpaed_stage2_map_page" alt="" coords="609,112,775,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afee733063f1c9c6f9fa314492d1ffb11"></a><!-- doxytag: member="vmm.c::vmm_set_vmid_ttbl" ref="afee733063f1c9c6f9fa314492d1ffb11" args="(vmid_t vmid, lpaed_t *ttbl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a> <a class="el" href="vmm_8h.html#afee733063f1c9c6f9fa314492d1ffb11">vmm_set_vmid_ttbl</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a>&#160;</td>
          <td class="paramname"><em>vmid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionlpaed__t.html">lpaed_t</a> *&#160;</td>
          <td class="paramname"><em>ttbl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00397">397</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> vttbr;

    <span class="comment">/* </span>
<span class="comment">     * VTTBR.VMID = vmid</span>
<span class="comment">     * VTTBR.BADDR = ttbl</span>
<span class="comment">     */</span>
    vttbr = <a class="code" href="armv7__p15_8h.html#a4e4681628f215ab9436d9376e67ec931">read_vttbr</a>();
<span class="preprocessor">#if 0 </span><span class="comment">/* ignore message due to flood log message */</span>
    uart_print( <span class="stringliteral">&quot;current vttbr:&quot;</span> ); uart_print_hex64(vttbr); uart_print(<span class="stringliteral">&quot;\n\r&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    vttbr &amp;= ~(<a class="code" href="vmm_8c.html#a51957d8f1ea0f906cb820566d2e6ac13">VTTBR_VMID_MASK</a>);
    vttbr |= ((<a class="code" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>)vmid &lt;&lt; <a class="code" href="vmm_8c.html#adc8f291db26100706ad7043e243b3d90">VTTBR_VMID_SHIFT</a>) &amp; <a class="code" href="vmm_8c.html#a51957d8f1ea0f906cb820566d2e6ac13">VTTBR_VMID_MASK</a>;

    vttbr &amp;= ~(<a class="code" href="vmm_8c.html#a4501b8c9d5eb0090c0d25441720e3fa9">VTTBR_BADDR_MASK</a>);
    vttbr |= (<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) ttbl &amp; <a class="code" href="vmm_8c.html#a4501b8c9d5eb0090c0d25441720e3fa9">VTTBR_BADDR_MASK</a>;
    <a class="code" href="armv7__p15_8h.html#af3a68551ffa6743c517c720afea598a6">write_vttbr</a>(vttbr);

    vttbr = <a class="code" href="armv7__p15_8h.html#a4e4681628f215ab9436d9376e67ec931">read_vttbr</a>();
<span class="preprocessor">#if 0 </span><span class="comment">/* ignore message due to flood log message */</span>
    uart_print( <span class="stringliteral">&quot;changed vttbr:&quot;</span> ); uart_print_hex64(vttbr); uart_print(<span class="stringliteral">&quot;\n\r&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2addc8231abb0339e0a6abc0d34b156faf">HVMM_STATUS_SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aad790266948b8b547025a7a62006f0da"></a><!-- doxytag: member="vmm.c::vmm_stage2_enable" ref="aad790266948b8b547025a7a62006f0da" args="(int enable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="vmm_8h.html#aad790266948b8b547025a7a62006f0da">vmm_stage2_enable</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00383">383</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> hcr;

    <span class="comment">// HCR.VM[0] = enable</span>
    hcr = <a class="code" href="armv7__p15_8h.html#a3b7662f2d5a21a8a49f06da2a29483ec">read_hcr</a>(); <span class="comment">//uart_print( &quot;hcr:&quot;); uart_print_hex32(hcr); uart_print(&quot;\n\r&quot;);</span>
    <span class="keywordflow">if</span> ( enable ) {
        hcr |= (0x1);
    } <span class="keywordflow">else</span> {
        hcr &amp;= ~(0x1);
    }
    <a class="code" href="armv7__p15_8h.html#ab2fd766fe3ad6974730d990af8af1aad">write_hcr</a>( hcr );
}
</pre></div>
</div>
</div>
<a class="anchor" id="a19aea725b1f8c73bce85b2fd5cd11da0"></a><!-- doxytag: member="vmm.c::vmm_ttbl2_init_entries" ref="a19aea725b1f8c73bce85b2fd5cd11da0" args="(lpaed_t *ttbl2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="vmm_8c.html#a19aea725b1f8c73bce85b2fd5cd11da0">vmm_ttbl2_init_entries</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionlpaed__t.html">lpaed_t</a> *&#160;</td>
          <td class="paramname"><em>ttbl2</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00245">245</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> i, j;
    <a class="code" href="hvmm__trace_8h.html#afd02d86121dd2e186b6240f52df4c716">HVMM_TRACE_ENTER</a>();

    <a class="code" href="unionlpaed__t.html">lpaed_t</a> *ttbl3;
    <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code" href="vmm_8c.html#ac8e7b4467a0918b25fc587bb5eebf49c">VMM_L2_PTE_NUM</a>; i++ ) {
        ttbl3 = <a class="code" href="vmm_8c.html#ab8a3dfcf3e8c3051219e7b45c27398bd">TTBL_L3</a>(ttbl2, i);
        printh(<span class="stringliteral">&quot;ttbl2[%d]:%x ttbl3[]:%x\n&quot;</span>, i, &amp;ttbl2[i], ttbl3 );
        <a class="code" href="lpae_8c.html#ad87d6a55d9a4301257cc7efe32ad0153">lpaed_stage2_conf_l2_table</a>( &amp;ttbl2[i], (<a class="code" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>) ((<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) ttbl3), 0);
        <span class="keywordflow">for</span>( j = 0; j &lt; <a class="code" href="vmm_8c.html#ac8e7b4467a0918b25fc587bb5eebf49c">VMM_L2_PTE_NUM</a>; j++) {
            ttbl3[j].<a class="code" href="unionlpaed__t.html#acddbc2df6cd0023f42d3076bd91794df">pt</a>.<a class="code" href="structlpae__pt__t.html#a7bcbc21e402fb9e3dc07789d414ef17c">valid</a> = 0;
        }
    }        

    <a class="code" href="hvmm__trace_8h.html#a9b123d92a0aece2a4900afdc8ab8016f">HVMM_TRACE_EXIT</a>();
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vmm_8c_a19aea725b1f8c73bce85b2fd5cd11da0_cgraph.png" border="0" usemap="#vmm_8c_a19aea725b1f8c73bce85b2fd5cd11da0_cgraph" alt=""/></div>
<map name="vmm_8c_a19aea725b1f8c73bce85b2fd5cd11da0_cgraph" id="vmm_8c_a19aea725b1f8c73bce85b2fd5cd11da0_cgraph">
<area shape="rect" id="node3" href="lpae_8c.html#ad87d6a55d9a4301257cc7efe32ad0153" title="lpaed_stage2_conf_l2_table" alt="" coords="209,5,391,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac7f3629c0263bf9be799744dedbe0100"></a><!-- doxytag: member="vmm.c::vmm_ttbl2_map" ref="ac7f3629c0263bf9be799744dedbe0100" args="(lpaed_t *ttbl2, uint64_t va_offset, uint64_t pa, uint32_t size, lpaed_stage2_memattr_t mattr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="vmm_8c.html#ac7f3629c0263bf9be799744dedbe0100">vmm_ttbl2_map</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionlpaed__t.html">lpaed_t</a> *&#160;</td>
          <td class="paramname"><em>ttbl2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>va_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>pa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lpae_8h.html#a05d556a9b3ba68a3bafcc96839956371">lpaed_stage2_memattr_t</a>&#160;</td>
          <td class="paramname"><em>mattr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00184">184</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> block_offset;
    <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> index_l2;
    <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> index_l2_last;
    <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> num_blocks;
    <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> pages;
    <a class="code" href="unionlpaed__t.html">lpaed_t</a> *ttbl3;
    <span class="keywordtype">int</span> i;

    <a class="code" href="hvmm__trace_8h.html#afd02d86121dd2e186b6240f52df4c716">HVMM_TRACE_ENTER</a>();
    printh( <span class="stringliteral">&quot;ttbl2:%x va_offset:%x pa:%x size:%d\n&quot;</span>, (<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) ttbl2, (<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) va_offset, (<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) <a class="code" href="structmemmap__desc.html#ac3bd9bdf9d7c837b3f990461d5c7fb19">pa</a>, <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a>);

    index_l2 = va_offset &gt;&gt; <a class="code" href="lpae_8h.html#af225cc22c2e7f987b80ee61da25ae26b">LPAE_BLOCK_L2_SHIFT</a>;
    block_offset = va_offset &amp; <a class="code" href="lpae_8h.html#a973e297107a6fb3776bc38ba8b1fafb6">LPAE_BLOCK_L2_MASK</a>;
    printh( <span class="stringliteral">&quot;- index_l2:%d block_offset:%x\n&quot;</span>, index_l2, (<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) block_offset);
    <span class="comment">/* head &lt; BLOCK */</span>
    <span class="keywordflow">if</span> ( block_offset ) {
        <a class="code" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> offset;
        offset = block_offset &gt;&gt; <a class="code" href="lpae_8h.html#a6befaab0b52e6cf5e8a38301caa9ef0c">LPAE_PAGE_SHIFT</a>;
        pages = <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> &gt;&gt; <a class="code" href="lpae_8h.html#a6befaab0b52e6cf5e8a38301caa9ef0c">LPAE_PAGE_SHIFT</a>;
        <span class="keywordflow">if</span> ( pages &gt; <a class="code" href="vmm_8c.html#a83c3649efe1790c46a003114d043804a">VMM_L3_PTE_NUM</a> ) {
            pages = <a class="code" href="vmm_8c.html#a83c3649efe1790c46a003114d043804a">VMM_L3_PTE_NUM</a>;
        }
        ttbl3 = <a class="code" href="vmm_8c.html#ab8a3dfcf3e8c3051219e7b45c27398bd">TTBL_L3</a>(ttbl2, index_l2 );
        <a class="code" href="vmm_8c.html#a180b5829894039ae4bc5e58d16892ab2">vmm_ttbl3_map</a>( ttbl3, offset, pages, <a class="code" href="structmemmap__desc.html#ac3bd9bdf9d7c837b3f990461d5c7fb19">pa</a>, mattr );
        <a class="code" href="lpae_8c.html#abfb766e3ac67185b6e435f24b3223527">lpaed_stage2_enable_l2_table</a>( &amp;ttbl2[index_l2] );

        va_offset |= ~LPAE_BLOCK_L2_MASK;
        <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> -= pages * <a class="code" href="lpae_8h.html#aeb496b092ccc1c44143800ad41b19335">LPAE_PAGE_SIZE</a>;
        <a class="code" href="structmemmap__desc.html#ac3bd9bdf9d7c837b3f990461d5c7fb19">pa</a> += pages * <a class="code" href="lpae_8h.html#aeb496b092ccc1c44143800ad41b19335">LPAE_PAGE_SIZE</a>;
        index_l2 ++;
    }

    <span class="comment">/* body : n BLOCKS */</span>
    <span class="keywordflow">if</span> ( <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> &gt; 0 ) {
        num_blocks = <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> &gt;&gt; <a class="code" href="lpae_8h.html#af225cc22c2e7f987b80ee61da25ae26b">LPAE_BLOCK_L2_SHIFT</a>;
        index_l2_last = index_l2 + num_blocks;
        printh( <span class="stringliteral">&quot;- index_l2_last:%d num_blocks:%d size:%d\n&quot;</span>, index_l2_last, (<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) num_blocks, <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a>);

        <span class="keywordflow">for</span>( i = index_l2; i &lt; index_l2_last; i++ ) {
            <a class="code" href="lpae_8c.html#abfb766e3ac67185b6e435f24b3223527">lpaed_stage2_enable_l2_table</a>( &amp;ttbl2[i] );
            <a class="code" href="vmm_8c.html#a180b5829894039ae4bc5e58d16892ab2">vmm_ttbl3_map</a>( <a class="code" href="vmm_8c.html#ab8a3dfcf3e8c3051219e7b45c27398bd">TTBL_L3</a>(ttbl2, i), 0, <a class="code" href="vmm_8c.html#a83c3649efe1790c46a003114d043804a">VMM_L3_PTE_NUM</a>, <a class="code" href="structmemmap__desc.html#ac3bd9bdf9d7c837b3f990461d5c7fb19">pa</a>, mattr );
            <a class="code" href="structmemmap__desc.html#ac3bd9bdf9d7c837b3f990461d5c7fb19">pa</a> += <a class="code" href="lpae_8h.html#aac6ea8fa2a1d2cfff80c719c494f3f2e">LPAE_BLOCK_L2_SIZE</a>;
            <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> -= <a class="code" href="lpae_8h.html#aac6ea8fa2a1d2cfff80c719c494f3f2e">LPAE_BLOCK_L2_SIZE</a>;
        }
    }

    <span class="comment">/* tail &lt; BLOCK */</span>
    <span class="keywordflow">if</span> ( <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> &gt; 0) {
        pages = <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> &gt;&gt; <a class="code" href="lpae_8h.html#a6befaab0b52e6cf5e8a38301caa9ef0c">LPAE_PAGE_SHIFT</a>;
        printh( <span class="stringliteral">&quot;- pages:%d size:%d\n&quot;</span>, pages, <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a>);
        <span class="keywordflow">if</span> ( pages ) {
            ttbl3 = <a class="code" href="vmm_8c.html#ab8a3dfcf3e8c3051219e7b45c27398bd">TTBL_L3</a>(ttbl2, index_l2_last);
            <a class="code" href="vmm_8c.html#a180b5829894039ae4bc5e58d16892ab2">vmm_ttbl3_map</a>( ttbl3, 0, pages, <a class="code" href="structmemmap__desc.html#ac3bd9bdf9d7c837b3f990461d5c7fb19">pa</a>, mattr );
            <a class="code" href="lpae_8c.html#abfb766e3ac67185b6e435f24b3223527">lpaed_stage2_enable_l2_table</a>( &amp;ttbl2[index_l2_last] );
        }
    }
    <a class="code" href="hvmm__trace_8h.html#a9b123d92a0aece2a4900afdc8ab8016f">HVMM_TRACE_EXIT</a>();
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vmm_8c_ac7f3629c0263bf9be799744dedbe0100_cgraph.png" border="0" usemap="#vmm_8c_ac7f3629c0263bf9be799744dedbe0100_cgraph" alt=""/></div>
<map name="vmm_8c_ac7f3629c0263bf9be799744dedbe0100_cgraph" id="vmm_8c_ac7f3629c0263bf9be799744dedbe0100_cgraph">
<area shape="rect" id="node3" href="vmm_8c.html#a180b5829894039ae4bc5e58d16892ab2" title="vmm_ttbl3_map" alt="" coords="209,5,324,35"/><area shape="rect" id="node7" href="lpae_8c.html#abfb766e3ac67185b6e435f24b3223527" title="lpaed_stage2_enable_l2_table" alt="" coords="169,59,364,88"/><area shape="rect" id="node5" href="lpae_8c.html#aff0ed5c291334c705ddbd99f197e1247" title="lpaed_stage2_map_page" alt="" coords="415,5,580,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3960ecb54fc00d5ec5bb1cbe4ebf4e16"></a><!-- doxytag: member="vmm.c::vmm_ttbl2_unmap" ref="a3960ecb54fc00d5ec5bb1cbe4ebf4e16" args="(lpaed_t *ttbl2, uint64_t va_offset, uint32_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="vmm_8c.html#a3960ecb54fc00d5ec5bb1cbe4ebf4e16">vmm_ttbl2_unmap</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionlpaed__t.html">lpaed_t</a> *&#160;</td>
          <td class="paramname"><em>ttbl2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>va_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00160">160</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> index_l2 = 0;
    <span class="keywordtype">int</span> index_l2_last = 0;
    <span class="keywordtype">int</span> num_blocks = 0;

    <span class="comment">/* Initialize the address spaces with &#39;invalid&#39; state */</span>

    num_blocks = <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> &gt;&gt; <a class="code" href="lpae_8h.html#af225cc22c2e7f987b80ee61da25ae26b">LPAE_BLOCK_L2_SHIFT</a>;
    index_l2 = va_offset &gt;&gt; <a class="code" href="lpae_8h.html#af225cc22c2e7f987b80ee61da25ae26b">LPAE_BLOCK_L2_SHIFT</a>;
    index_l2_last = num_blocks;

    <span class="keywordflow">for</span>( ; index_l2 &lt; index_l2_last; index_l2++ ) {
        ttbl2[index_l2].<a class="code" href="unionlpaed__t.html#acddbc2df6cd0023f42d3076bd91794df">pt</a>.<a class="code" href="structlpae__pt__t.html#a7bcbc21e402fb9e3dc07789d414ef17c">valid</a> = 0;
    }

    <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> &amp;= <a class="code" href="lpae_8h.html#a973e297107a6fb3776bc38ba8b1fafb6">LPAE_BLOCK_L2_MASK</a>;
    <span class="keywordflow">if</span> ( <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> ) {
        <span class="comment">// last partial block</span>
        <a class="code" href="unionlpaed__t.html">lpaed_t</a> *ttbl3 = <a class="code" href="vmm_8c.html#ab8a3dfcf3e8c3051219e7b45c27398bd">TTBL_L3</a>(ttbl2, index_l2);
        <a class="code" href="vmm_8c.html#ade96e2f0eb8c3b27c184ea8498777b46">vmm_ttbl3_unmap</a>( ttbl3, 0x00000000, <a class="code" href="structmemmap__desc.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a> &gt;&gt; <a class="code" href="lpae_8h.html#a6befaab0b52e6cf5e8a38301caa9ef0c">LPAE_PAGE_SHIFT</a>);
    }
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vmm_8c_a3960ecb54fc00d5ec5bb1cbe4ebf4e16_cgraph.png" border="0" usemap="#vmm_8c_a3960ecb54fc00d5ec5bb1cbe4ebf4e16_cgraph" alt=""/></div>
<map name="vmm_8c_a3960ecb54fc00d5ec5bb1cbe4ebf4e16_cgraph" id="vmm_8c_a3960ecb54fc00d5ec5bb1cbe4ebf4e16_cgraph">
<area shape="rect" id="node3" href="vmm_8c.html#ade96e2f0eb8c3b27c184ea8498777b46" title="vmm_ttbl3_unmap" alt="" coords="185,5,313,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a180b5829894039ae4bc5e58d16892ab2"></a><!-- doxytag: member="vmm.c::vmm_ttbl3_map" ref="a180b5829894039ae4bc5e58d16892ab2" args="(lpaed_t *ttbl3, uint64_t offset, uint32_t pages, uint64_t pa, lpaed_stage2_memattr_t mattr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="vmm_8c.html#a180b5829894039ae4bc5e58d16892ab2">vmm_ttbl3_map</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionlpaed__t.html">lpaed_t</a> *&#160;</td>
          <td class="paramname"><em>ttbl3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>pages</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>pa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lpae_8h.html#a05d556a9b3ba68a3bafcc96839956371">lpaed_stage2_memattr_t</a>&#160;</td>
          <td class="paramname"><em>mattr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00119">119</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> index_l3 = 0;
    <span class="keywordtype">int</span> index_l3_last = 0;

 
    printh( <span class="stringliteral">&quot;%s[%d]: ttbl3:%x offset:%x pte:%x pages:%d, pa:%x\n&quot;</span>, __FUNCTION__, __LINE__, (<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) ttbl3, (<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) offset, &amp;ttbl3[offset], pages, (<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) <a class="code" href="structmemmap__desc.html#ac3bd9bdf9d7c837b3f990461d5c7fb19">pa</a>);
    <span class="comment">/* Initialize the address spaces with &#39;invalid&#39; state */</span>

    index_l3 = offset;
    index_l3_last = index_l3 + pages;

    <span class="keywordflow">for</span>( ; index_l3 &lt; index_l3_last; index_l3++ ) {
        <a class="code" href="lpae_8c.html#aff0ed5c291334c705ddbd99f197e1247">lpaed_stage2_map_page</a>(&amp;ttbl3[index_l3], <a class="code" href="structmemmap__desc.html#ac3bd9bdf9d7c837b3f990461d5c7fb19">pa</a>, mattr );
        <a class="code" href="structmemmap__desc.html#ac3bd9bdf9d7c837b3f990461d5c7fb19">pa</a> += <a class="code" href="lpae_8h.html#aeb496b092ccc1c44143800ad41b19335">LPAE_PAGE_SIZE</a>;
    }

}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="vmm_8c_a180b5829894039ae4bc5e58d16892ab2_cgraph.png" border="0" usemap="#vmm_8c_a180b5829894039ae4bc5e58d16892ab2_cgraph" alt=""/></div>
<map name="vmm_8c_a180b5829894039ae4bc5e58d16892ab2_cgraph" id="vmm_8c_a180b5829894039ae4bc5e58d16892ab2_cgraph">
<area shape="rect" id="node3" href="lpae_8c.html#aff0ed5c291334c705ddbd99f197e1247" title="lpaed_stage2_map_page" alt="" coords="169,5,335,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ade96e2f0eb8c3b27c184ea8498777b46"></a><!-- doxytag: member="vmm.c::vmm_ttbl3_unmap" ref="ade96e2f0eb8c3b27c184ea8498777b46" args="(lpaed_t *ttbl3, uint64_t offset, uint32_t pages)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="vmm_8c.html#ade96e2f0eb8c3b27c184ea8498777b46">vmm_ttbl3_unmap</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionlpaed__t.html">lpaed_t</a> *&#160;</td>
          <td class="paramname"><em>ttbl3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arch__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>pages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00139">139</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> index_l3 = 0;
    <span class="keywordtype">int</span> index_l3_last = 0;

    <span class="comment">/* Initialize the address spaces with &#39;invalid&#39; state */</span>

    index_l3 = offset &gt;&gt; <a class="code" href="lpae_8h.html#a6befaab0b52e6cf5e8a38301caa9ef0c">LPAE_PAGE_SHIFT</a>;
    index_l3_last = index_l3 + pages;

    <span class="keywordflow">for</span>( ; index_l3 &lt; index_l3_last; index_l3++ ) {
        ttbl3[index_l3].<a class="code" href="unionlpaed__t.html#acddbc2df6cd0023f42d3076bd91794df">pt</a>.<a class="code" href="structlpae__pt__t.html#a7bcbc21e402fb9e3dc07789d414ef17c">valid</a> = 0;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a269ada885aa7296fc4601e4cfe6a134b"></a><!-- doxytag: member="vmm.c::vmm_vmid_ttbl" ref="a269ada885aa7296fc4601e4cfe6a134b" args="(vmid_t vmid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="unionlpaed__t.html">lpaed_t</a>* <a class="el" href="vmm_8h.html#a269ada885aa7296fc4601e4cfe6a134b">vmm_vmid_ttbl</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a>&#160;</td>
          <td class="paramname"><em>vmid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00373">373</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="unionlpaed__t.html">lpaed_t</a> *ttbl = 0;
    <span class="keywordflow">if</span> ( vmid &lt; <a class="code" href="hyp__config_8h.html#a7fcfcbc766cea81a21e2d8aba3b54843">NUM_GUESTS_STATIC</a> ) {
        ttbl = <a class="code" href="vmm_8c.html#a01ee9b39803516e895627447812e4ee1">_vmid_ttbl</a>[vmid];
    }
    <span class="keywordflow">return</span> ttbl;
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a01ee9b39803516e895627447812e4ee1"></a><!-- doxytag: member="vmm.c::_vmid_ttbl" ref="a01ee9b39803516e895627447812e4ee1" args="[NUM_GUESTS_STATIC]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="unionlpaed__t.html">lpaed_t</a>* <a class="el" href="vmm_8c.html#a01ee9b39803516e895627447812e4ee1">_vmid_ttbl</a>[<a class="el" href="hyp__config_8h.html#a7fcfcbc766cea81a21e2d8aba3b54843">NUM_GUESTS_STATIC</a>]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vmm_8c_source.html#l00053">53</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab6ae8dae234de686040fcd733765cdc5"></a><!-- doxytag: member="vmm.c::guest2_bin_start" ref="ab6ae8dae234de686040fcd733765cdc5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="vmm_8c.html#ab6ae8dae234de686040fcd733765cdc5">guest2_bin_start</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6834f1cdeb19fe290ffeb2f62394e5cd"></a><!-- doxytag: member="vmm.c::guest_bin_start" ref="a6834f1cdeb19fe290ffeb2f62394e5cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="vmm_8c.html#a6834f1cdeb19fe290ffeb2f62394e5cd">guest_bin_start</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac04a34d558fa50fcd48a6b62694049e3"></a><!-- doxytag: member="vmm.c::guest_device_md0" ref="ac04a34d558fa50fcd48a6b62694049e3" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmemmap__desc.html">memmap_desc</a> <a class="el" href="vmm_8c.html#ac04a34d558fa50fcd48a6b62694049e3">guest_device_md0</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    
    CFG_GUEST0_DEVICE_MEMORY,
    { 0, 0, 0, 0,  0},
}
</pre></div>
<p>Definition at line <a class="el" href="vmm_8c_source.html#l00070">70</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4065b8a2c64a98de1549a250d4a5ddba"></a><!-- doxytag: member="vmm.c::guest_device_md1" ref="a4065b8a2c64a98de1549a250d4a5ddba" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmemmap__desc.html">memmap_desc</a> <a class="el" href="vmm_8c.html#a4065b8a2c64a98de1549a250d4a5ddba">guest_device_md1</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    
    CFG_GUEST1_DEVICE_MEMORY,
    { 0, 0, 0, 0,  0},
}
</pre></div>
<p>Definition at line <a class="el" href="vmm_8c_source.html#l00076">76</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a36e85cb6296246e95073b1ee9e45abd2"></a><!-- doxytag: member="vmm.c::guest_md_empty" ref="a36e85cb6296246e95073b1ee9e45abd2" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmemmap__desc.html">memmap_desc</a> <a class="el" href="vmm_8c.html#a36e85cb6296246e95073b1ee9e45abd2">guest_md_empty</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    {       0, 0, 0, 0,  0},
}
</pre></div>
<p>Definition at line <a class="el" href="vmm_8c_source.html#l00066">66</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0974e8331682cf4d953667cf4b24b4ee"></a><!-- doxytag: member="vmm.c::guest_mdlist0" ref="a0974e8331682cf4d953667cf4b24b4ee" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmemmap__desc.html">memmap_desc</a>* <a class="el" href="vmm_8c.html#a0974e8331682cf4d953667cf4b24b4ee">guest_mdlist0</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    &amp;<a class="code" href="vmm_8c.html#ac04a34d558fa50fcd48a6b62694049e3">guest_device_md0</a>[0],   
    &amp;<a class="code" href="vmm_8c.html#a36e85cb6296246e95073b1ee9e45abd2">guest_md_empty</a>[0],     
    &amp;<a class="code" href="vmm_8c.html#a3d3790518e4334717071a39482dde8ec">guest_memory_md0</a>[0],
    &amp;guest_md_empty[0],     
    0
}
</pre></div>
<p>Definition at line <a class="el" href="vmm_8c_source.html#l00095">95</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a61961d5dffc30571d28cbb7b4cf5cb94"></a><!-- doxytag: member="vmm.c::guest_mdlist1" ref="a61961d5dffc30571d28cbb7b4cf5cb94" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmemmap__desc.html">memmap_desc</a>* <a class="el" href="vmm_8c.html#a61961d5dffc30571d28cbb7b4cf5cb94">guest_mdlist1</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    &amp;<a class="code" href="vmm_8c.html#a4065b8a2c64a98de1549a250d4a5ddba">guest_device_md1</a>[0],
    &amp;<a class="code" href="vmm_8c.html#a36e85cb6296246e95073b1ee9e45abd2">guest_md_empty</a>[0],
    &amp;<a class="code" href="vmm_8c.html#a2ecf2b20575bb082ed279e4094298656">guest_memory_md1</a>[0],
    &amp;guest_md_empty[0],
    0
}
</pre></div>
<p>Definition at line <a class="el" href="vmm_8c_source.html#l00104">104</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3d3790518e4334717071a39482dde8ec"></a><!-- doxytag: member="vmm.c::guest_memory_md0" ref="a3d3790518e4334717071a39482dde8ec" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmemmap__desc.html">memmap_desc</a> <a class="el" href="vmm_8c.html#a3d3790518e4334717071a39482dde8ec">guest_memory_md0</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    
    { <span class="stringliteral">&quot;start&quot;</span>, 0x00000000,          0, 0x30000000, <a class="code" href="lpae_8h.html#a05d556a9b3ba68a3bafcc96839956371a199cb5d0ed2c3c8ff3ab2436ce6c0163">LPAED_STAGE2_MEMATTR_NORMAL_OWT</a> | <a class="code" href="lpae_8h.html#a05d556a9b3ba68a3bafcc96839956371a907daee7e55021342e4889c691d2bdda">LPAED_STAGE2_MEMATTR_NORMAL_IWT</a> },
    {       0, 0, 0, 0,  0},
}
</pre></div>
<p>Definition at line <a class="el" href="vmm_8c_source.html#l00082">82</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2ecf2b20575bb082ed279e4094298656"></a><!-- doxytag: member="vmm.c::guest_memory_md1" ref="a2ecf2b20575bb082ed279e4094298656" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmemmap__desc.html">memmap_desc</a> <a class="el" href="vmm_8c.html#a2ecf2b20575bb082ed279e4094298656">guest_memory_md1</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    
    { <span class="stringliteral">&quot;start&quot;</span>, 0x00000000,          0, 0x10000000, <a class="code" href="lpae_8h.html#a05d556a9b3ba68a3bafcc96839956371a199cb5d0ed2c3c8ff3ab2436ce6c0163">LPAED_STAGE2_MEMATTR_NORMAL_OWT</a> | <a class="code" href="lpae_8h.html#a05d556a9b3ba68a3bafcc96839956371a907daee7e55021342e4889c691d2bdda">LPAED_STAGE2_MEMATTR_NORMAL_IWT</a> },
    {       0, 0, 0, 0,  0},
}
</pre></div>
<p>Definition at line <a class="el" href="vmm_8c_source.html#l00088">88</a> of file <a class="el" href="vmm_8c_source.html">vmm.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 18 2014 16:44:40 for khypervisor by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
