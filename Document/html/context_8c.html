<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>khypervisor: context.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">khypervisor
   &#160;<span id="projectnumber">v1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">context.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="armv7__p15_8h_source.html">armv7_p15.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="arch__types_8h_source.html">arch_types.h</a>&gt;</code><br/>
<code>#include &lt;k-hypervisor-config.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="mm_8h_source.html">mm.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="gic_8h_source.html">gic.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="interrupt_8h_source.html">interrupt.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="context_8h_source.html">context.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="scheduler_8h_source.html">scheduler.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="hvmm__trace_8h_source.html">hvmm_trace.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="vdev_8h_source.html">vdev.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="vdev__gicd_8h_source.html">vdev/vdev_gicd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="gic__regs_8h_source.html">gic_regs.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="virqmap_8h_source.html">virqmap.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="trap_8h_source.html">trap.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="vmm_8h_source.html">vmm.h</a>&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="loadlinux_8h_source.html">loadlinux.h</a>&quot;</code><br/>
<code>#include &lt;config/cfg_platform.h&gt;</code><br/>
<code>#include &lt;log/uart_print.h&gt;</code><br/>
<code>#include &lt;log/print.h&gt;</code><br/>
<code>#include &lt;test/tests.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="version_8h_source.html">version.h</a>&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for context.c:</div>
<div class="dyncontent">
<div class="center"><img src="context_8c__incl.png" border="0" usemap="#context_8c" alt=""/></div>
<map name="context_8c" id="context_8c">
<area shape="rect" id="node3" href="armv7__p15_8h.html" title="armv7_p15.h" alt="" coords="101,160,197,189"/><area shape="rect" id="node5" href="arch__types_8h.html" title="arch_types.h" alt="" coords="497,392,593,421"/><area shape="rect" id="node10" href="mm_8h.html" title="mm.h" alt="" coords="525,237,579,267"/><area shape="rect" id="node19" href="gic_8h.html" title="gic.h" alt="" coords="1111,237,1161,267"/><area shape="rect" id="node26" href="interrupt_8h.html" title="interrupt.h" alt="" coords="637,160,717,189"/><area shape="rect" id="node29" href="context_8h.html" title="context.h" alt="" coords="285,160,360,189"/><area shape="rect" id="node38" href="scheduler_8h.html" title="scheduler.h" alt="" coords="323,83,411,112"/><area shape="rect" id="node48" href="hvmm__trace_8h.html" title="hvmm_trace.h" alt="" coords="939,160,1043,189"/><area shape="rect" id="node51" href="vdev_8h.html" title="vdev.h" alt="" coords="485,83,547,112"/><area shape="rect" id="node55" href="vdev__gicd_8h.html" title="vdev/vdev_gicd.h" alt="" coords="741,160,864,189"/><area shape="rect" id="node58" href="gic__regs_8h.html" title="gic_regs.h" alt="" coords="883,83,965,112"/><area shape="rect" id="node60" href="virqmap_8h.html" title="virqmap.h" alt="" coords="989,83,1067,112"/><area shape="rect" id="node65" href="trap_8h.html" title="trap.h" alt="" coords="1091,83,1144,112"/><area shape="rect" id="node67" href="vmm_8h.html" title="vmm.h" alt="" coords="653,237,715,267"/><area shape="rect" id="node73" href="loadlinux_8h.html" title="loadlinux.h" alt="" coords="1261,315,1344,344"/><area shape="rect" id="node83" href="version_8h.html" title="version.h" alt="" coords="1739,83,1813,112"/><area shape="rect" id="node12" href="hvmm__types_8h.html" title="hvmm_types.h" alt="" coords="631,315,737,344"/><area shape="rect" id="node16" href="lpae_8h.html" title="lpae.h" alt="" coords="551,315,607,344"/><area shape="rect" id="node23" href="smp_8h.html" title="smp.h" alt="" coords="1161,315,1220,344"/><area shape="rect" id="node33" href="vgic_8h.html" title="vgic.h" alt="" coords="360,237,416,267"/><area shape="rect" id="node42" href="timer_8h.html" title="timer.h" alt="" coords="440,237,501,267"/></map>
</div>
</div>
<p><a href="context_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#acf4405f8c387893e69eadc140804d0a4">NUM_GUEST_CONTEXTS</a>&#160;&#160;&#160;<a class="el" href="hyp__config_8h.html#a7fcfcbc766cea81a21e2d8aba3b54843">NUM_GUESTS_STATIC</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#ac2acf5f304ad2586db8ac74f73583192">CPSR_MODE_USER</a>&#160;&#160;&#160;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a60a6474fca8951df30ee82637a052343">CPSR_MODE_FIQ</a>&#160;&#160;&#160;0x11</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a08f87658898e94f8dd95e9c5399e4b9f">CPSR_MODE_IRQ</a>&#160;&#160;&#160;0x12</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a22cbc694995e613968671515fed868e3">CPSR_MODE_SVC</a>&#160;&#160;&#160;0x13</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a09e3f1abdea736a92287ad2e6e34b140">CPSR_MODE_MON</a>&#160;&#160;&#160;0x16</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a9ba0ca5c2cb76845b52e65858e685aa0">CPSR_MODE_ABT</a>&#160;&#160;&#160;0x17</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a8ea2c78389eb5876f60019865169ec9b">CPSR_MODE_HYP</a>&#160;&#160;&#160;0x1A</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#ab9d61d021a43fac1fe42e6aafd2d79b4">CPSR_MODE_UND</a>&#160;&#160;&#160;0x1B</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a482d96e0df0946aa10ec155ae5284c43">CPSR_MODE_SYS</a>&#160;&#160;&#160;0x1F</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a53af5b93b8ac73356843a760d8b31944">__CONTEXT_TRACE_VERBOSE__</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a6523708467fd815ab3dad9638219c7c2">_valid_vmid</a>(vmid)&#160;&#160;&#160;( <a class="el" href="context_8h.html#a891f8f7028b04322da205990de1a8f5b">context_first_vmid</a>() &lt;= vmid &amp;&amp; <a class="el" href="context_8h.html#ad48a9977fdb537cc020b451e08dfc590">context_last_vmid</a>() &gt;= vmid )</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a86f464d89297ef8121c2f36141c221a7">__mon_switch_to_guest_context</a> (struct <a class="el" href="structarch__regs.html">arch_regs</a> *<a class="el" href="vdev__timer_8c.html#a514d7f36beee4b3e39da305e12d39d0a">regs</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a3a2da2487bde91bb02d3363bd17d905a">_hyp_guest0_copy_zimage</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#aa662295d6861cedca861f13c4ad5ece4">context_dump_regs</a> (struct <a class="el" href="structarch__regs.html">arch_regs</a> *<a class="el" href="vdev__timer_8c.html#a514d7f36beee4b3e39da305e12d39d0a">regs</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a58e0589f3c325fe4e8cd8cdd215d1e8b">context_copy_regs</a> (struct <a class="el" href="structarch__regs.html">arch_regs</a> *regs_dst, struct <a class="el" href="structarch__regs.html">arch_regs</a> *regs_src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a6daf5c209647b93b848801070e6e30ef">context_init_banked</a> (struct <a class="el" href="structarch__regs__banked.html">arch_regs_banked</a> *regs_banked)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a57af844ae7e83a33d88a4c36eee930eb">context_save_banked</a> (struct <a class="el" href="structarch__regs__banked.html">arch_regs_banked</a> *regs_banked)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a94bb8d6785586134cc873c061076d323">context_restore_banked</a> (struct <a class="el" href="structarch__regs__banked.html">arch_regs_banked</a> *regs_banked)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a3b7e34c1497427e5fdcc9b059fb813be">context_init_cops</a> (struct <a class="el" href="structarch__regs__cop.html">arch_regs_cop</a> *regs_cop)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a9a5bddd4742fe9c4cc8ee9fa50cf03bf">context_save_cops</a> (struct <a class="el" href="structarch__regs__cop.html">arch_regs_cop</a> *regs_cop)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a2d3fdf44ea523c8f4978cf9c33107768">context_restore_cops</a> (struct <a class="el" href="structarch__regs__cop.html">arch_regs_cop</a> *regs_cop)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#adbcfdbfe8d61021879f1622e2c6dc29c">context_perform_switch_to_guest_regs</a> (struct <a class="el" href="structarch__regs.html">arch_regs</a> *regs_current, <a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a> next_vmid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a77fe269a194f9dcfcd0a599a9b6e3bfb">context_perform_switch</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a39db644c82cc9c99ef78feb58d57b58c">context_switch_to_initial_guest</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a0abdd106a2b654464230b622b4c9877e">context_init_guests</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structhyp__guest__context.html">hyp_guest_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#ae8e692844cf2c76f7661088f7a7be817">context_atvmid</a> (<a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a> vmid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a891f8f7028b04322da205990de1a8f5b">context_first_vmid</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#ad48a9977fdb537cc020b451e08dfc590">context_last_vmid</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a5719d5d4a8d98b9784d0f24a2023f05f">context_next_vmid</a> (<a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a> ofvmid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a525fcf860b6f33b4192443c9d66ba4f6">context_current_vmid</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a3fd5aa68bf14823442fcc5fda4cb6a51">context_waiting_vmid</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#aaa75f8a973764763b44ca823e02f4406">context_switchto</a> (<a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a> vmid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a00b56df45d0ef16d93040b667bb025ef">context_switchto_lock</a> (<a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a> vmid, <a class="el" href="arch__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> locked)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a83895de158b7efc9456e7475528e42d4">start_guest_os</a> (void)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structhyp__guest__context.html">hyp_guest_context</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a7a55b222a2790b315eaf5dbe7a12c407">guest_contexts</a> [<a class="el" href="context_8c.html#acf4405f8c387893e69eadc140804d0a4">NUM_GUEST_CONTEXTS</a>]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a5de72a0d4dd972c7d7d8c9d08272d9e8">_current_guest_vmid</a> = <a class="el" href="hvmm__types_8h.html#a286d5f39683a49a6e5d4ef92043b3c9f">VMID_INVALID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a5f1b0bb9a3d788646bb83d32d12419f3">_next_guest_vmid</a> = <a class="el" href="hvmm__types_8h.html#a286d5f39683a49a6e5d4ef92043b3c9f">VMID_INVALID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="arch__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="context_8c.html#a345440f03deca2090efe13b08eaead89">_switch_locked</a> = 0</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a53af5b93b8ac73356843a760d8b31944"></a><!-- doxytag: member="context.c::__CONTEXT_TRACE_VERBOSE__" ref="a53af5b93b8ac73356843a760d8b31944" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="context_8c.html#a53af5b93b8ac73356843a760d8b31944">__CONTEXT_TRACE_VERBOSE__</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00044">44</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6523708467fd815ab3dad9638219c7c2"></a><!-- doxytag: member="context.c::_valid_vmid" ref="a6523708467fd815ab3dad9638219c7c2" args="(vmid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="context_8c.html#a6523708467fd815ab3dad9638219c7c2">_valid_vmid</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">vmid</td><td>)</td>
          <td>&#160;&#160;&#160;( <a class="el" href="context_8h.html#a891f8f7028b04322da205990de1a8f5b">context_first_vmid</a>() &lt;= vmid &amp;&amp; <a class="el" href="context_8h.html#ad48a9977fdb537cc020b451e08dfc590">context_last_vmid</a>() &gt;= vmid )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00045">45</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9ba0ca5c2cb76845b52e65858e685aa0"></a><!-- doxytag: member="context.c::CPSR_MODE_ABT" ref="a9ba0ca5c2cb76845b52e65858e685aa0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="context_8c.html#a9ba0ca5c2cb76845b52e65858e685aa0">CPSR_MODE_ABT</a>&#160;&#160;&#160;0x17</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00039">39</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="a60a6474fca8951df30ee82637a052343"></a><!-- doxytag: member="context.c::CPSR_MODE_FIQ" ref="a60a6474fca8951df30ee82637a052343" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="context_8c.html#a60a6474fca8951df30ee82637a052343">CPSR_MODE_FIQ</a>&#160;&#160;&#160;0x11</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00035">35</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8ea2c78389eb5876f60019865169ec9b"></a><!-- doxytag: member="context.c::CPSR_MODE_HYP" ref="a8ea2c78389eb5876f60019865169ec9b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="context_8c.html#a8ea2c78389eb5876f60019865169ec9b">CPSR_MODE_HYP</a>&#160;&#160;&#160;0x1A</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00040">40</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="a08f87658898e94f8dd95e9c5399e4b9f"></a><!-- doxytag: member="context.c::CPSR_MODE_IRQ" ref="a08f87658898e94f8dd95e9c5399e4b9f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="context_8c.html#a08f87658898e94f8dd95e9c5399e4b9f">CPSR_MODE_IRQ</a>&#160;&#160;&#160;0x12</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00036">36</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="a09e3f1abdea736a92287ad2e6e34b140"></a><!-- doxytag: member="context.c::CPSR_MODE_MON" ref="a09e3f1abdea736a92287ad2e6e34b140" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="context_8c.html#a09e3f1abdea736a92287ad2e6e34b140">CPSR_MODE_MON</a>&#160;&#160;&#160;0x16</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00038">38</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="a22cbc694995e613968671515fed868e3"></a><!-- doxytag: member="context.c::CPSR_MODE_SVC" ref="a22cbc694995e613968671515fed868e3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="context_8c.html#a22cbc694995e613968671515fed868e3">CPSR_MODE_SVC</a>&#160;&#160;&#160;0x13</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00037">37</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="a482d96e0df0946aa10ec155ae5284c43"></a><!-- doxytag: member="context.c::CPSR_MODE_SYS" ref="a482d96e0df0946aa10ec155ae5284c43" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="context_8c.html#a482d96e0df0946aa10ec155ae5284c43">CPSR_MODE_SYS</a>&#160;&#160;&#160;0x1F</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00042">42</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab9d61d021a43fac1fe42e6aafd2d79b4"></a><!-- doxytag: member="context.c::CPSR_MODE_UND" ref="ab9d61d021a43fac1fe42e6aafd2d79b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="context_8c.html#ab9d61d021a43fac1fe42e6aafd2d79b4">CPSR_MODE_UND</a>&#160;&#160;&#160;0x1B</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00041">41</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac2acf5f304ad2586db8ac74f73583192"></a><!-- doxytag: member="context.c::CPSR_MODE_USER" ref="ac2acf5f304ad2586db8ac74f73583192" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="context_8c.html#ac2acf5f304ad2586db8ac74f73583192">CPSR_MODE_USER</a>&#160;&#160;&#160;0x10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00034">34</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="acf4405f8c387893e69eadc140804d0a4"></a><!-- doxytag: member="context.c::NUM_GUEST_CONTEXTS" ref="acf4405f8c387893e69eadc140804d0a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="context_8c.html#acf4405f8c387893e69eadc140804d0a4">NUM_GUEST_CONTEXTS</a>&#160;&#160;&#160;<a class="el" href="hyp__config_8h.html#a7fcfcbc766cea81a21e2d8aba3b54843">NUM_GUESTS_STATIC</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00032">32</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a86f464d89297ef8121c2f36141c221a7"></a><!-- doxytag: member="context.c::__mon_switch_to_guest_context" ref="a86f464d89297ef8121c2f36141c221a7" args="(struct arch_regs *regs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="context_8c.html#a86f464d89297ef8121c2f36141c221a7">__mon_switch_to_guest_context</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structarch__regs.html">arch_regs</a> *&#160;</td>
          <td class="paramname"><em>regs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3a2da2487bde91bb02d3363bd17d905a"></a><!-- doxytag: member="context.c::_hyp_guest0_copy_zimage" ref="a3a2da2487bde91bb02d3363bd17d905a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="context_8c.html#a3a2da2487bde91bb02d3363bd17d905a">_hyp_guest0_copy_zimage</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00059">59</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">extern</span> <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="vmm_8c.html#a6834f1cdeb19fe290ffeb2f62394e5cd">guest_bin_start</a>;
    <span class="keyword">extern</span> <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> guest_bin_end;

    <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *src = &amp;guest_bin_start;
    <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *end = &amp;guest_bin_end;
    <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *dst = &amp;guest_bin_start + (0x20008000/4);

    <a class="code" href="hvmm__trace_8h.html#afd02d86121dd2e186b6240f52df4c716">HVMM_TRACE_ENTER</a>();

    uart_print(<span class="stringliteral">&quot;Copying guest0 image to guest1\n\r&quot;</span>);
    uart_print(<span class="stringliteral">&quot; src:&quot;</span>);uart_print_hex32((<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)src); 
    uart_print(<span class="stringliteral">&quot; dst:&quot;</span>);uart_print_hex32((<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)dst); 
    uart_print(<span class="stringliteral">&quot; size:&quot;</span>);uart_print_hex32( (<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)(end - src) * <span class="keyword">sizeof</span>(<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>));uart_print(<span class="stringliteral">&quot;\n\r&quot;</span>);

    <span class="keywordflow">while</span>(src &lt; end ) {
        *dst++ = *src++;
    }
    uart_print(<span class="stringliteral">&quot;=== done ===\n\r&quot;</span>);
    <a class="code" href="hvmm__trace_8h.html#a9b123d92a0aece2a4900afdc8ab8016f">HVMM_TRACE_EXIT</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae8e692844cf2c76f7661088f7a7be817"></a><!-- doxytag: member="context.c::context_atvmid" ref="ae8e692844cf2c76f7661088f7a7be817" args="(vmid_t vmid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structhyp__guest__context.html">hyp_guest_context</a>* <a class="el" href="context_8h.html#ae8e692844cf2c76f7661088f7a7be817">context_atvmid</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a>&#160;</td>
          <td class="paramname"><em>vmid</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00526">526</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structhyp__guest__context.html">hyp_guest_context</a> * result = 0;

    <span class="keywordflow">if</span> ( <a class="code" href="structhyp__guest__context.html#a5aaea0584ec137718b51152ba747628b">vmid</a> &lt; <a class="code" href="context_8c.html#acf4405f8c387893e69eadc140804d0a4">NUM_GUEST_CONTEXTS</a> ) {
        result = &amp;<a class="code" href="context_8c.html#a7a55b222a2790b315eaf5dbe7a12c407">guest_contexts</a>[<a class="code" href="structhyp__guest__context.html#a5aaea0584ec137718b51152ba747628b">vmid</a>];
    }

    <span class="keywordflow">return</span> result;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a58e0589f3c325fe4e8cd8cdd215d1e8b"></a><!-- doxytag: member="context.c::context_copy_regs" ref="a58e0589f3c325fe4e8cd8cdd215d1e8b" args="(struct arch_regs *regs_dst, struct arch_regs *regs_src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="context_8c.html#a58e0589f3c325fe4e8cd8cdd215d1e8b">context_copy_regs</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structarch__regs.html">arch_regs</a> *&#160;</td>
          <td class="paramname"><em>regs_dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structarch__regs.html">arch_regs</a> *&#160;</td>
          <td class="paramname"><em>regs_src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00163">163</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> i;
    regs_dst-&gt;<a class="code" href="structarch__regs.html#a0d1814f5edf1360a76b54ac386be5e85">cpsr</a> = regs_src-&gt;<a class="code" href="structarch__regs.html#a0d1814f5edf1360a76b54ac386be5e85">cpsr</a>;
    regs_dst-&gt;<a class="code" href="structarch__regs.html#afaa20335217fae16f0e22b466017dae1">pc</a> = regs_src-&gt;<a class="code" href="structarch__regs.html#afaa20335217fae16f0e22b466017dae1">pc</a>;
    regs_dst-&gt;<a class="code" href="structarch__regs.html#a6ced3f4007bb60daf12191c058e55b8c">lr</a> = regs_src-&gt;<a class="code" href="structarch__regs.html#a6ced3f4007bb60daf12191c058e55b8c">lr</a>;
    <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code" href="context_8h.html#a469821668f7cfd63c2dd4f05120f1ccf">ARCH_REGS_NUM_GPR</a>; i++) {
        regs_dst-&gt;<a class="code" href="structarch__regs.html#a3397c2bbf4a3049cf5bca2831ada10b8">gpr</a>[i] = regs_src-&gt;<a class="code" href="structarch__regs.html#a3397c2bbf4a3049cf5bca2831ada10b8">gpr</a>[i];
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a525fcf860b6f33b4192443c9d66ba4f6"></a><!-- doxytag: member="context.c::context_current_vmid" ref="a525fcf860b6f33b4192443c9d66ba4f6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a> <a class="el" href="context_8h.html#a525fcf860b6f33b4192443c9d66ba4f6">context_current_vmid</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00562">562</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="context_8c.html#a5de72a0d4dd972c7d7d8c9d08272d9e8">_current_guest_vmid</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa662295d6861cedca861f13c4ad5ece4"></a><!-- doxytag: member="context.c::context_dump_regs" ref="aa662295d6861cedca861f13c4ad5ece4" args="(struct arch_regs *regs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="context_8h.html#aa662295d6861cedca861f13c4ad5ece4">context_dump_regs</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structarch__regs.html">arch_regs</a> *&#160;</td>
          <td class="paramname"><em>regs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00145">145</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef DEBUG</span>
<span class="preprocessor"></span>    uart_print( <span class="stringliteral">&quot;cpsr:&quot;</span> ); uart_print_hex32( regs-&gt;<a class="code" href="structarch__regs.html#a0d1814f5edf1360a76b54ac386be5e85">cpsr</a> ); uart_print( <span class="stringliteral">&quot;\n\r&quot;</span> );
    uart_print( <span class="stringliteral">&quot;  pc:&quot;</span> ); uart_print_hex32( regs-&gt;<a class="code" href="structarch__regs.html#afaa20335217fae16f0e22b466017dae1">pc</a> ); uart_print( <span class="stringliteral">&quot;\n\r&quot;</span> );
    uart_print( <span class="stringliteral">&quot;  lr:&quot;</span> ); uart_print_hex32( regs-&gt;<a class="code" href="structarch__regs.html#a6ced3f4007bb60daf12191c058e55b8c">lr</a> ); uart_print( <span class="stringliteral">&quot;\n\r&quot;</span> );

<span class="preprocessor">#ifdef __CONTEXT_TRACE_VERBOSE__</span>
<span class="preprocessor"></span>    {
        <span class="keywordtype">int</span> i;
        uart_print( <span class="stringliteral">&quot; gpr:\n\r&quot;</span> );
        <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code" href="context_8h.html#a469821668f7cfd63c2dd4f05120f1ccf">ARCH_REGS_NUM_GPR</a>; i++) {
            uart_print( <span class="stringliteral">&quot;     &quot;</span> ); uart_print_hex32( regs-&gt;<a class="code" href="structarch__regs.html#a3397c2bbf4a3049cf5bca2831ada10b8">gpr</a>[i] ); uart_print( <span class="stringliteral">&quot;\n\r&quot;</span> );
        }
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a891f8f7028b04322da205990de1a8f5b"></a><!-- doxytag: member="context.c::context_first_vmid" ref="a891f8f7028b04322da205990de1a8f5b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a> <a class="el" href="context_8h.html#a891f8f7028b04322da205990de1a8f5b">context_first_vmid</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00538">538</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">/* FIXME:Hardcoded for now */</span>
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6daf5c209647b93b848801070e6e30ef"></a><!-- doxytag: member="context.c::context_init_banked" ref="a6daf5c209647b93b848801070e6e30ef" args="(struct arch_regs_banked *regs_banked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="context_8c.html#a6daf5c209647b93b848801070e6e30ef">context_init_banked</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structarch__regs__banked.html">arch_regs_banked</a> *&#160;</td>
          <td class="paramname"><em>regs_banked</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00176">176</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ab0c3d0a7fb315b79b4d6214743b5b082">sp_usr</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ae6da0f77fc42b43bfc0be39e8e5da763">spsr_svc</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a1d0fa26522eac23d880de2722023522d">sp_svc</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a4e9874b76913bbabf160a5a855581bbc">lr_svc</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ac5fcf632140189c2cf143162a8388135">spsr_abt</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a6ed5ed1e9e6a1e54a4a720269edfee5e">sp_abt</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a849c08959c26885f666f8adfae89aaf9">lr_abt</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a23e21972e22c7e1c44c75a47e4d6443a">spsr_und</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a184486e6dbb8bf48fd4d4675fb4040e4">sp_und</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a9c99745c4b28ca5c46c0aee6a164b089">lr_und</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#aee1280364392ef11a9db3da9c2a2c5ee">spsr_irq</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a995e4155cdaeb7d8dc530a52f531ad7d">sp_irq</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a40c4ed1151aa96baf0123e142db7fd5c">lr_irq</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a667268175afba21309aaaac957734a43">spsr_fiq</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a969afbee21b8eeb5325d9093d42fb085">lr_fiq</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ab701f0dbdeace6bb500199d02e3369b3">r8_fiq</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a04eb0a04b720eb5fe1ff3a6105d35e3a">r9_fiq</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a7667e6ed136285709f1c4d4b7b366d90">r10_fiq</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ad746f675f085d70248a5b6209f8f2c1f">r11_fiq</a> = 0;
    regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a9b4ae5ee03bbdb881f787bb43620a12a">r12_fiq</a> = 0;
    <span class="comment">//Cortex-A15 processor does not support sp_fiq</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3b7e34c1497427e5fdcc9b059fb813be"></a><!-- doxytag: member="context.c::context_init_cops" ref="a3b7e34c1497427e5fdcc9b059fb813be" args="(struct arch_regs_cop *regs_cop)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="context_8c.html#a3b7e34c1497427e5fdcc9b059fb813be">context_init_cops</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structarch__regs__cop.html">arch_regs_cop</a> *&#160;</td>
          <td class="paramname"><em>regs_cop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00313">313</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a335ee10c53de8aea54ce9cd9bc56d4e0">vbar</a> = 0;
    regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a63fedd79936a58893e5d3a188565c194">ttbr0</a> = 0;
    regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a1dca0b48c512d7e2301433e859d4007d">ttbr1</a> = 0;
    regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a18368f32ecf9fa858d6caedd845ec701">ttbcr</a> = 0;
    regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a07f46454f9d2a374f9118a03945d3551">sctlr</a> = 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0abdd106a2b654464230b622b4c9877e"></a><!-- doxytag: member="context.c::context_init_guests" ref="a0abdd106a2b654464230b622b4c9877e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="context_8h.html#a0abdd106a2b654464230b622b4c9877e">context_init_guests</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00468">468</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structhyp__guest__context.html">hyp_guest_context</a> *context;
    <span class="keyword">struct </span><a class="code" href="structarch__regs.html">arch_regs</a> *<a class="code" href="vdev__sample_8c.html#a83967e2c2e61558528fec54f1060435b">regs</a> = 0;

    
    uart_print(<span class="stringliteral">&quot;[hyp] init_guests: enter\n\r&quot;</span>);


    <span class="comment">/* Guest 1 @guest_bin_start */</span>
    context = &amp;<a class="code" href="context_8c.html#a7a55b222a2790b315eaf5dbe7a12c407">guest_contexts</a>[0];
    regs = &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a6fd37717ff9cb8421e3e19acc489b565">regs</a>;
    regs-&gt;<a class="code" href="structarch__regs.html#a0d1814f5edf1360a76b54ac386be5e85">cpsr</a> = 0x1d3;         <span class="comment">// supervisor, interrupt disabled</span>
<span class="preprocessor">#if defined (LINUX_GUEST)</span>
<span class="preprocessor"></span>    regs-&gt;<a class="code" href="structarch__regs.html#afaa20335217fae16f0e22b466017dae1">pc</a> = 0xA0008000;      <span class="comment">// PA:0xA0008000, where zImage is</span>
    regs-&gt;<a class="code" href="structarch__regs.html#a3397c2bbf4a3049cf5bca2831ada10b8">gpr</a>[1] = CFG_MACHINE_NUMBER;
    regs-&gt;<a class="code" href="structarch__regs.html#a3397c2bbf4a3049cf5bca2831ada10b8">gpr</a>[2] = 0x80000100;  <span class="comment">//src+(0x100/4);</span>
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    regs-&gt;<a class="code" href="structarch__regs.html#afaa20335217fae16f0e22b466017dae1">pc</a> = 0x80000000;      <span class="comment">// PA:0xA0000000, default entry for bmguest</span>
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    <span class="comment">/* regs-&gt;gpr[] = whatever */</span>
    context-&gt;<a class="code" href="structhyp__guest__context.html#a5aaea0584ec137718b51152ba747628b">vmid</a> = 0;
    context-&gt;<a class="code" href="structhyp__guest__context.html#af96dd8c0db5b16addac6cbaa292894d1">ttbl</a> = <a class="code" href="vmm_8c.html#a269ada885aa7296fc4601e4cfe6a134b">vmm_vmid_ttbl</a>(context-&gt;<a class="code" href="structhyp__guest__context.html#a5aaea0584ec137718b51152ba747628b">vmid</a>);
    <a class="code" href="context_8c.html#a3b7e34c1497427e5fdcc9b059fb813be">context_init_cops</a>( &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a216fdbbf2a31b2bef63e2c013f25ce51">regs_cop</a> );
    <a class="code" href="context_8c.html#a6daf5c209647b93b848801070e6e30ef">context_init_banked</a>( &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a16825e70a665e6368fce044d9f1fdb07">regs_banked</a> );
    <a class="code" href="vgic_8c.html#ac901a925af53a53bf1840d9be9acd2e0">vgic_init_status</a>( &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#aaf1e3e694ca7bf2cbda2d9817f3e9389">vgic_status</a>, context-&gt;<a class="code" href="structhyp__guest__context.html#a5aaea0584ec137718b51152ba747628b">vmid</a> );

    <span class="comment">/* Guest 2 @guest2_bin_start */</span>
    context = &amp;<a class="code" href="context_8c.html#a7a55b222a2790b315eaf5dbe7a12c407">guest_contexts</a>[1];
    regs = &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a6fd37717ff9cb8421e3e19acc489b565">regs</a>;
    regs-&gt;<a class="code" href="structarch__regs.html#afaa20335217fae16f0e22b466017dae1">pc</a> = 0x80000000;  <span class="comment">// PA: 0xB0000000</span>
    regs-&gt;<a class="code" href="structarch__regs.html#a0d1814f5edf1360a76b54ac386be5e85">cpsr</a> = 0x1d3; <span class="comment">// supervisor, interrupt disabled</span>

    <span class="comment">/* regs-&gt;gpr[] = whatever */</span>
    context-&gt;<a class="code" href="structhyp__guest__context.html#a5aaea0584ec137718b51152ba747628b">vmid</a> = 1;
    context-&gt;<a class="code" href="structhyp__guest__context.html#af96dd8c0db5b16addac6cbaa292894d1">ttbl</a> = <a class="code" href="vmm_8c.html#a269ada885aa7296fc4601e4cfe6a134b">vmm_vmid_ttbl</a>(context-&gt;<a class="code" href="structhyp__guest__context.html#a5aaea0584ec137718b51152ba747628b">vmid</a>);
    <a class="code" href="context_8c.html#a3b7e34c1497427e5fdcc9b059fb813be">context_init_cops</a>( &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a216fdbbf2a31b2bef63e2c013f25ce51">regs_cop</a> );
    <a class="code" href="context_8c.html#a6daf5c209647b93b848801070e6e30ef">context_init_banked</a>( &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a16825e70a665e6368fce044d9f1fdb07">regs_banked</a> );
    <a class="code" href="vgic_8c.html#ac901a925af53a53bf1840d9be9acd2e0">vgic_init_status</a>( &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#aaf1e3e694ca7bf2cbda2d9817f3e9389">vgic_status</a>, context-&gt;<a class="code" href="structhyp__guest__context.html#a5aaea0584ec137718b51152ba747628b">vmid</a> );

<span class="preprocessor">#if defined (LINUX_GUEST)</span>
<span class="preprocessor"></span>    <a class="code" href="context_8c.html#a3a2da2487bde91bb02d3363bd17d905a">_hyp_guest0_copy_zimage</a>();
<span class="preprocessor">#elif defined (BAREMETAL_GUEST) </span>
<span class="preprocessor"></span>    <span class="comment">/* Workaround for unloaded bmguest.bin at 0xB0000000@PA */</span>
    _hyp_fixup_unloaded_guest();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
<span class="preprocessor">#if defined (LINUX_GUEST)</span>
<span class="preprocessor"></span>    {
        <span class="keyword">extern</span> <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="vmm_8c.html#a6834f1cdeb19fe290ffeb2f62394e5cd">guest_bin_start</a>;
        <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *src = &amp;guest_bin_start;
        <a class="code" href="loadlinux_8c.html#a2a6cc0b74cefed5f4e51dad4629113b6">loadlinux_setup_tags</a>(src);
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    uart_print(<span class="stringliteral">&quot;[hyp] init_guests: return\n\r&quot;</span>);
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="context_8c_a0abdd106a2b654464230b622b4c9877e_cgraph.png" border="0" usemap="#context_8c_a0abdd106a2b654464230b622b4c9877e_cgraph" alt=""/></div>
<map name="context_8c_a0abdd106a2b654464230b622b4c9877e_cgraph" id="context_8c_a0abdd106a2b654464230b622b4c9877e_cgraph">
<area shape="rect" id="node3" href="vmm_8c.html#a269ada885aa7296fc4601e4cfe6a134b" title="vmm_vmid_ttbl" alt="" coords="225,5,335,35"/><area shape="rect" id="node5" href="context_8c.html#a3b7e34c1497427e5fdcc9b059fb813be" title="context_init_cops" alt="" coords="219,59,341,88"/><area shape="rect" id="node7" href="context_8c.html#a6daf5c209647b93b848801070e6e30ef" title="context_init_banked" alt="" coords="211,112,349,141"/><area shape="rect" id="node9" href="vgic_8c.html#ac901a925af53a53bf1840d9be9acd2e0" title="vgic_init_status" alt="" coords="224,165,336,195"/><area shape="rect" id="node11" href="context_8c.html#a3a2da2487bde91bb02d3363bd17d905a" title="_hyp_guest0_copy_zimage" alt="" coords="191,219,369,248"/><area shape="rect" id="node13" href="loadlinux_8c.html#a2a6cc0b74cefed5f4e51dad4629113b6" title="loadlinux_setup_tags" alt="" coords="208,272,352,301"/><area shape="rect" id="node15" href="loadlinux_8c.html#a10904ac070605f86d3606ba299f64b49" title="setup_core_tag" alt="" coords="429,165,539,195"/><area shape="rect" id="node17" href="loadlinux_8c.html#a1a183928400cc8188e5b66f19998fd5c" title="setup_cmdline_tag" alt="" coords="419,219,549,248"/><area shape="rect" id="node19" href="loadlinux_8c.html#a9c037ad7fb55ab7bd4472f24f37497e9" title="setup_revision_tag" alt="" coords="419,272,549,301"/><area shape="rect" id="node21" href="loadlinux_8c.html#a60b7de4ae0bfc8c455be4e08cd9f62bf" title="setup_mem_tag" alt="" coords="427,325,541,355"/><area shape="rect" id="node23" href="loadlinux_8c.html#a1792ccde316d08f0860e600a061f8a74" title="setup_end_tag" alt="" coords="431,379,537,408"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad48a9977fdb537cc020b451e08dfc590"></a><!-- doxytag: member="context.c::context_last_vmid" ref="ad48a9977fdb537cc020b451e08dfc590" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a> <a class="el" href="context_8h.html#ad48a9977fdb537cc020b451e08dfc590">context_last_vmid</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00544">544</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">/* FIXME:Hardcoded for now */</span>
    <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5719d5d4a8d98b9784d0f24a2023f05f"></a><!-- doxytag: member="context.c::context_next_vmid" ref="a5719d5d4a8d98b9784d0f24a2023f05f" args="(vmid_t ofvmid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a> <a class="el" href="context_8h.html#a5719d5d4a8d98b9784d0f24a2023f05f">context_next_vmid</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a>&#160;</td>
          <td class="paramname"><em>ofvmid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00550">550</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a> next = <a class="code" href="hvmm__types_8h.html#a286d5f39683a49a6e5d4ef92043b3c9f">VMID_INVALID</a>;
    <span class="keywordflow">if</span> ( ofvmid == <a class="code" href="hvmm__types_8h.html#a286d5f39683a49a6e5d4ef92043b3c9f">VMID_INVALID</a> ) {
        next = <a class="code" href="context_8c.html#a891f8f7028b04322da205990de1a8f5b">context_first_vmid</a>();
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ofvmid &lt; <a class="code" href="context_8c.html#ad48a9977fdb537cc020b451e08dfc590">context_last_vmid</a>() ) {
        <span class="comment">/* FIXME:Hardcoded */</span>
        next = ofvmid + 1;
    }
    <span class="keywordflow">return</span> next;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="context_8c_a5719d5d4a8d98b9784d0f24a2023f05f_cgraph.png" border="0" usemap="#context_8c_a5719d5d4a8d98b9784d0f24a2023f05f_cgraph" alt=""/></div>
<map name="context_8c_a5719d5d4a8d98b9784d0f24a2023f05f_cgraph" id="context_8c_a5719d5d4a8d98b9784d0f24a2023f05f_cgraph">
<area shape="rect" id="node3" href="context_8c.html#a891f8f7028b04322da205990de1a8f5b" title="context_first_vmid" alt="" coords="188,5,316,35"/><area shape="rect" id="node5" href="context_8c.html#ad48a9977fdb537cc020b451e08dfc590" title="context_last_vmid" alt="" coords="188,59,316,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a77fe269a194f9dcfcd0a599a9b6e3bfb"></a><!-- doxytag: member="context.c::context_perform_switch" ref="a77fe269a194f9dcfcd0a599a9b6e3bfb" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a> <a class="el" href="context_8h.html#a77fe269a194f9dcfcd0a599a9b6e3bfb">context_perform_switch</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00419">419</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a> result = <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2af0867c4f6ed7b73f7395ec73ab840989">HVMM_STATUS_IGNORED</a>;

    <span class="keywordflow">if</span> ( <a class="code" href="context_8c.html#a5de72a0d4dd972c7d7d8c9d08272d9e8">_current_guest_vmid</a> == <a class="code" href="hvmm__types_8h.html#a286d5f39683a49a6e5d4ef92043b3c9f">VMID_INVALID</a> ) {
        printh(<span class="stringliteral">&quot;context: launching the first guest\n&quot;</span>);
        <span class="comment">/* very first time, to the default first guest */</span>
        result = <a class="code" href="context_8c.html#adbcfdbfe8d61021879f1622e2c6dc29c">context_perform_switch_to_guest_regs</a>( 0, <a class="code" href="context_8c.html#a5f1b0bb9a3d788646bb83d32d12419f3">_next_guest_vmid</a> );
        <span class="comment">/* DOES NOT COME BACK HERE */</span>
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="context_8c.html#a5f1b0bb9a3d788646bb83d32d12419f3">_next_guest_vmid</a> != <a class="code" href="hvmm__types_8h.html#a286d5f39683a49a6e5d4ef92043b3c9f">VMID_INVALID</a> &amp;&amp; <a class="code" href="context_8c.html#a5de72a0d4dd972c7d7d8c9d08272d9e8">_current_guest_vmid</a> != <a class="code" href="context_8c.html#a5f1b0bb9a3d788646bb83d32d12419f3">_next_guest_vmid</a> ) {
        <span class="keyword">struct </span><a class="code" href="structarch__regs.html">arch_regs</a> *<a class="code" href="vdev__sample_8c.html#a83967e2c2e61558528fec54f1060435b">regs</a> = <a class="code" href="trap_8c.html#a795de22500c2371c39b9275b38e10b91">trap_saved_regs</a>();
        <span class="keywordflow">if</span> ( (regs-&gt;<a class="code" href="structarch__regs.html#a0d1814f5edf1360a76b54ac386be5e85">cpsr</a> &amp; 0x1F) != 0x1A ) {
            printh(<span class="stringliteral">&quot;curr: %x\n&quot;</span>, <a class="code" href="context_8c.html#a5de72a0d4dd972c7d7d8c9d08272d9e8">_current_guest_vmid</a>);
            printh(<span class="stringliteral">&quot;next: %x\n&quot;</span>, <a class="code" href="context_8c.html#a5f1b0bb9a3d788646bb83d32d12419f3">_next_guest_vmid</a>);

            <span class="comment">/* Only if not from Hyp */</span>
            result = <a class="code" href="context_8c.html#adbcfdbfe8d61021879f1622e2c6dc29c">context_perform_switch_to_guest_regs</a>( regs, <a class="code" href="context_8c.html#a5f1b0bb9a3d788646bb83d32d12419f3">_next_guest_vmid</a> );
            <a class="code" href="context_8c.html#a5f1b0bb9a3d788646bb83d32d12419f3">_next_guest_vmid</a> = <a class="code" href="hvmm__types_8h.html#a286d5f39683a49a6e5d4ef92043b3c9f">VMID_INVALID</a>;
        }
    } <span class="keywordflow">else</span> {
        <span class="comment">/* Staying at the currently active guest. Flush out queued virqs since we didn&#39;t have a chance to switch the context, where virq flush takes place,  this time */</span>
        <a class="code" href="vgic_8c.html#acb00c28d2618d3581a7d26f8e265ccb8">vgic_flush_virqs</a>(<a class="code" href="context_8c.html#a5de72a0d4dd972c7d7d8c9d08272d9e8">_current_guest_vmid</a>);
    }

    <a class="code" href="context_8c.html#a345440f03deca2090efe13b08eaead89">_switch_locked</a> = 0;
    <span class="keywordflow">return</span> result;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="context_8c_a77fe269a194f9dcfcd0a599a9b6e3bfb_cgraph.png" border="0" usemap="#context_8c_a77fe269a194f9dcfcd0a599a9b6e3bfb_cgraph" alt=""/></div>
<map name="context_8c_a77fe269a194f9dcfcd0a599a9b6e3bfb_cgraph" id="context_8c_a77fe269a194f9dcfcd0a599a9b6e3bfb_cgraph">
<area shape="rect" id="node3" href="context_8c.html#adbcfdbfe8d61021879f1622e2c6dc29c" title="context_perform_switch_to_guest_regs" alt="" coords="216,272,467,301"/><area shape="rect" id="node21" href="vgic_8c.html#acb00c28d2618d3581a7d26f8e265ccb8" title="vgic_flush_virqs" alt="" coords="781,459,896,488"/><area shape="rect" id="node35" href="trap_8c.html#a795de22500c2371c39b9275b38e10b91" title="trap_saved_regs" alt="" coords="283,589,400,619"/><area shape="rect" id="node5" href="vmm_8c.html#aad790266948b8b547025a7a62006f0da" title="vmm_stage2_enable" alt="" coords="551,5,692,35"/><area shape="rect" id="node7" href="context_8c.html#a58e0589f3c325fe4e8cd8cdd215d1e8b" title="context_copy_regs" alt="" coords="556,59,687,88"/><area shape="rect" id="node9" href="context_8c.html#a9a5bddd4742fe9c4cc8ee9fa50cf03bf" title="context_save_cops" alt="" coords="555,112,688,141"/><area shape="rect" id="node11" href="context_8c.html#a57af844ae7e83a33d88a4c36eee930eb" title="context_save_banked" alt="" coords="547,165,696,195"/><area shape="rect" id="node13" href="vgic_8c.html#aebad7b956b2c36d2bbe7acdbe333ae8a" title="vgic_save_status" alt="" coords="560,219,683,248"/><area shape="rect" id="node17" href="vmm_8c.html#afee733063f1c9c6f9fa314492d1ffb11" title="vmm_set_vmid_ttbl" alt="" coords="553,272,689,301"/><area shape="rect" id="node19" href="vgic_8c.html#a70332a1790f88fbcb1a4c7014e6b6a02" title="vgic_restore_status" alt="" coords="553,325,689,355"/><area shape="rect" id="node29" href="context_8c.html#a86f464d89297ef8121c2f36141c221a7" title="__mon_switch_to_guest_context" alt="" coords="515,379,728,408"/><area shape="rect" id="node31" href="context_8c.html#a2d3fdf44ea523c8f4978cf9c33107768" title="context_restore_cops" alt="" coords="548,432,695,461"/><area shape="rect" id="node33" href="context_8c.html#a94bb8d6785586134cc873c061076d323" title="context_restore_banked" alt="" coords="541,485,701,515"/><area shape="rect" id="node15" href="vgic_8c.html#a4cf554520738a7934bc4e6917853330c" title="vgic_enable" alt="" coords="793,219,884,248"/><area shape="rect" id="node23" href="vgic_8c.html#abfca2f5be8dfbb355800d70dbda23b5e" title="_vgic_dump_regs" alt="" coords="777,325,900,355"/><area shape="rect" id="node25" href="vgic_8c.html#ac1d43326139a3717d69ce1f876cd221c" title="vgic_is_free_slot" alt="" coords="949,325,1069,355"/><area shape="rect" id="node27" href="vgic_8c.html#aab31fc8d2c44ebb938b78cfb1f7c975f" title="vgic_find_free_slot" alt="" coords="1117,325,1248,355"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adbcfdbfe8d61021879f1622e2c6dc29c"></a><!-- doxytag: member="context.c::context_perform_switch_to_guest_regs" ref="adbcfdbfe8d61021879f1622e2c6dc29c" args="(struct arch_regs *regs_current, vmid_t next_vmid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a> <a class="el" href="context_8c.html#adbcfdbfe8d61021879f1622e2c6dc29c">context_perform_switch_to_guest_regs</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structarch__regs.html">arch_regs</a> *&#160;</td>
          <td class="paramname"><em>regs_current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a>&#160;</td>
          <td class="paramname"><em>next_vmid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00345">345</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">/* _curreng_guest_vmid -&gt; next_vmid */</span>

    <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a> result = <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2ab18889db955a0948118dabdfa0e38b30">HVMM_STATUS_UNKNOWN_ERROR</a>;
    <span class="keyword">struct </span><a class="code" href="structhyp__guest__context.html">hyp_guest_context</a> *context = 0;
    <span class="keyword">struct </span><a class="code" href="structarch__regs.html">arch_regs</a> *<a class="code" href="vdev__sample_8c.html#a83967e2c2e61558528fec54f1060435b">regs</a> = 0;
    
    <a class="code" href="hvmm__trace_8h.html#afd02d86121dd2e186b6240f52df4c716">HVMM_TRACE_ENTER</a>();

    <span class="keywordflow">if</span> ( <a class="code" href="context_8c.html#a5de72a0d4dd972c7d7d8c9d08272d9e8">_current_guest_vmid</a> == next_vmid ) {
        <span class="comment">/* the same guest? WTF? */</span>
        <span class="keywordflow">return</span> <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2af0867c4f6ed7b73f7395ec73ab840989">HVMM_STATUS_IGNORED</a>;
    }

    <span class="comment">/*</span>
<span class="comment">     * We assume VTCR has been configured and initialized in the memory management module</span>
<span class="comment">     */</span>
    <span class="comment">/* Disable Stage 2 Translation: HCR.VM = 0 */</span>
    <a class="code" href="vmm_8c.html#aad790266948b8b547025a7a62006f0da">vmm_stage2_enable</a>(0);

    <span class="keywordflow">if</span> ( regs_current != 0 ) {
        <span class="comment">/* save the current guest&#39;s context */</span>
        context = &amp;<a class="code" href="context_8c.html#a7a55b222a2790b315eaf5dbe7a12c407">guest_contexts</a>[<a class="code" href="context_8c.html#a5de72a0d4dd972c7d7d8c9d08272d9e8">_current_guest_vmid</a>];
        regs = &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a6fd37717ff9cb8421e3e19acc489b565">regs</a>;
        <a class="code" href="context_8c.html#a58e0589f3c325fe4e8cd8cdd215d1e8b">context_copy_regs</a>( regs, regs_current );
        <a class="code" href="context_8c.html#a9a5bddd4742fe9c4cc8ee9fa50cf03bf">context_save_cops</a>( &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a216fdbbf2a31b2bef63e2c013f25ce51">regs_cop</a> );
        <a class="code" href="context_8c.html#a57af844ae7e83a33d88a4c36eee930eb">context_save_banked</a>( &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a16825e70a665e6368fce044d9f1fdb07">regs_banked</a> );
        <a class="code" href="vgic_8c.html#aebad7b956b2c36d2bbe7acdbe333ae8a">vgic_save_status</a>( &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#aaf1e3e694ca7bf2cbda2d9817f3e9389">vgic_status</a>, context-&gt;<a class="code" href="structhyp__guest__context.html#a5aaea0584ec137718b51152ba747628b">vmid</a> );
        printh( <span class="stringliteral">&quot;context: saving vmid[%d] mode(%x):%s pc:0x%x\n&quot;</span>, 
                <a class="code" href="context_8c.html#a5de72a0d4dd972c7d7d8c9d08272d9e8">_current_guest_vmid</a>, 
                regs-&gt;<a class="code" href="structarch__regs.html#a0d1814f5edf1360a76b54ac386be5e85">cpsr</a> &amp; 0x1F, 
                _modename(regs-&gt;<a class="code" href="structarch__regs.html#a0d1814f5edf1360a76b54ac386be5e85">cpsr</a> &amp; 0x1F),
                regs-&gt;<a class="code" href="structarch__regs.html#afaa20335217fae16f0e22b466017dae1">pc</a>
       );
    }

    <span class="comment">/* The context of the next guest */</span>
    context = &amp;<a class="code" href="context_8c.html#a7a55b222a2790b315eaf5dbe7a12c407">guest_contexts</a>[next_vmid];

    <span class="comment">/* Restore Translation Table for the next guest and Enable Stage 2 Translation */</span>
    <a class="code" href="vmm_8c.html#afee733063f1c9c6f9fa314492d1ffb11">vmm_set_vmid_ttbl</a>( context-&gt;<a class="code" href="structhyp__guest__context.html#a5aaea0584ec137718b51152ba747628b">vmid</a>, context-&gt;<a class="code" href="structhyp__guest__context.html#af96dd8c0db5b16addac6cbaa292894d1">ttbl</a> );
    <a class="code" href="vmm_8c.html#aad790266948b8b547025a7a62006f0da">vmm_stage2_enable</a>(1);
    <a class="code" href="vgic_8c.html#a70332a1790f88fbcb1a4c7014e6b6a02">vgic_restore_status</a>( &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#aaf1e3e694ca7bf2cbda2d9817f3e9389">vgic_status</a>, context-&gt;<a class="code" href="structhyp__guest__context.html#a5aaea0584ec137718b51152ba747628b">vmid</a> );
    
    {
        <a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="context_8h.html#a6ced3f4007bb60daf12191c058e55b8c">lr</a> = 0;
        <span class="keyword">asm</span> <span class="keyword">volatile</span>( <span class="stringliteral">&quot;mov  %0, lr&quot;</span> : <span class="stringliteral">&quot;=r&quot;</span> (<a class="code" href="context_8h.html#a6ced3f4007bb60daf12191c058e55b8c">lr</a>) : : <span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
        printh( <span class="stringliteral">&quot;context: restoring vmid[%d] mode(%x):%s pc:0x%x lr:0x%x\n&quot;</span>, 
            next_vmid, 
            context-&gt;<a class="code" href="structhyp__guest__context.html#a6fd37717ff9cb8421e3e19acc489b565">regs</a>.<a class="code" href="structarch__regs.html#a0d1814f5edf1360a76b54ac386be5e85">cpsr</a> &amp; 0x1F, 
            _modename(context-&gt;<a class="code" href="structhyp__guest__context.html#a6fd37717ff9cb8421e3e19acc489b565">regs</a>.<a class="code" href="structarch__regs.html#a0d1814f5edf1360a76b54ac386be5e85">cpsr</a> &amp; 0x1F),
            context-&gt;<a class="code" href="structhyp__guest__context.html#a6fd37717ff9cb8421e3e19acc489b565">regs</a>.<a class="code" href="structarch__regs.html#afaa20335217fae16f0e22b466017dae1">pc</a>, lr
        );
    }

    <span class="comment">/* The next becomes the current */</span>
    <a class="code" href="context_8c.html#a5de72a0d4dd972c7d7d8c9d08272d9e8">_current_guest_vmid</a> = next_vmid;
    <span class="keywordflow">if</span> ( regs_current == 0 ) {
        <span class="comment">/* init -&gt; hyp mode -&gt; guest */</span>
        <span class="comment">/* The actual context switching (Hyp to Normal mode) handled in the asm code */</span>
        <a class="code" href="context_8c.html#a86f464d89297ef8121c2f36141c221a7">__mon_switch_to_guest_context</a>( &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a6fd37717ff9cb8421e3e19acc489b565">regs</a> );
    } <span class="keywordflow">else</span> {
        <span class="comment">/* guest -&gt; hyp -&gt; guest */</span>
        <a class="code" href="context_8c.html#a58e0589f3c325fe4e8cd8cdd215d1e8b">context_copy_regs</a>( regs_current, &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a6fd37717ff9cb8421e3e19acc489b565">regs</a> );
        <a class="code" href="context_8c.html#a2d3fdf44ea523c8f4978cf9c33107768">context_restore_cops</a>( &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a216fdbbf2a31b2bef63e2c013f25ce51">regs_cop</a> );
        <a class="code" href="context_8c.html#a94bb8d6785586134cc873c061076d323">context_restore_banked</a>( &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a16825e70a665e6368fce044d9f1fdb07">regs_banked</a> );
    }

    result = <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2addc8231abb0339e0a6abc0d34b156faf">HVMM_STATUS_SUCCESS</a>;
    <a class="code" href="hvmm__trace_8h.html#a9b123d92a0aece2a4900afdc8ab8016f">HVMM_TRACE_EXIT</a>();
    <span class="keywordflow">return</span> result;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="context_8c_adbcfdbfe8d61021879f1622e2c6dc29c_cgraph.png" border="0" usemap="#context_8c_adbcfdbfe8d61021879f1622e2c6dc29c_cgraph" alt=""/></div>
<map name="context_8c_adbcfdbfe8d61021879f1622e2c6dc29c_cgraph" id="context_8c_adbcfdbfe8d61021879f1622e2c6dc29c_cgraph">
<area shape="rect" id="node3" href="vmm_8c.html#aad790266948b8b547025a7a62006f0da" title="vmm_stage2_enable" alt="" coords="340,5,481,35"/><area shape="rect" id="node5" href="context_8c.html#a58e0589f3c325fe4e8cd8cdd215d1e8b" title="context_copy_regs" alt="" coords="345,59,476,88"/><area shape="rect" id="node7" href="context_8c.html#a9a5bddd4742fe9c4cc8ee9fa50cf03bf" title="context_save_cops" alt="" coords="344,112,477,141"/><area shape="rect" id="node9" href="context_8c.html#a57af844ae7e83a33d88a4c36eee930eb" title="context_save_banked" alt="" coords="336,165,485,195"/><area shape="rect" id="node11" href="vgic_8c.html#aebad7b956b2c36d2bbe7acdbe333ae8a" title="vgic_save_status" alt="" coords="349,219,472,248"/><area shape="rect" id="node15" href="vmm_8c.html#afee733063f1c9c6f9fa314492d1ffb11" title="vmm_set_vmid_ttbl" alt="" coords="343,272,479,301"/><area shape="rect" id="node17" href="vgic_8c.html#a70332a1790f88fbcb1a4c7014e6b6a02" title="vgic_restore_status" alt="" coords="343,325,479,355"/><area shape="rect" id="node27" href="context_8c.html#a86f464d89297ef8121c2f36141c221a7" title="__mon_switch_to_guest_context" alt="" coords="304,379,517,408"/><area shape="rect" id="node29" href="context_8c.html#a2d3fdf44ea523c8f4978cf9c33107768" title="context_restore_cops" alt="" coords="337,432,484,461"/><area shape="rect" id="node31" href="context_8c.html#a94bb8d6785586134cc873c061076d323" title="context_restore_banked" alt="" coords="331,485,491,515"/><area shape="rect" id="node13" href="vgic_8c.html#a4cf554520738a7934bc4e6917853330c" title="vgic_enable" alt="" coords="583,219,673,248"/><area shape="rect" id="node19" href="vgic_8c.html#acb00c28d2618d3581a7d26f8e265ccb8" title="vgic_flush_virqs" alt="" coords="571,299,685,328"/><area shape="rect" id="node21" href="vgic_8c.html#abfca2f5be8dfbb355800d70dbda23b5e" title="_vgic_dump_regs" alt="" coords="567,352,689,381"/><area shape="rect" id="node23" href="vgic_8c.html#ac1d43326139a3717d69ce1f876cd221c" title="vgic_is_free_slot" alt="" coords="739,352,859,381"/><area shape="rect" id="node25" href="vgic_8c.html#aab31fc8d2c44ebb938b78cfb1f7c975f" title="vgic_find_free_slot" alt="" coords="907,352,1037,381"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a94bb8d6785586134cc873c061076d323"></a><!-- doxytag: member="context.c::context_restore_banked" ref="a94bb8d6785586134cc873c061076d323" args="(struct arch_regs_banked *regs_banked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="context_8c.html#a94bb8d6785586134cc873c061076d323">context_restore_banked</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structarch__regs__banked.html">arch_regs_banked</a> *&#160;</td>
          <td class="paramname"><em>regs_banked</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00257">257</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">/* USR banked register */</span>
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    sp_usr, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ab0c3d0a7fb315b79b4d6214743b5b082">sp_usr</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);

    <span class="comment">/* SVC banked register */</span>
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    spsr_svc, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ae6da0f77fc42b43bfc0be39e8e5da763">spsr_svc</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    sp_svc, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a1d0fa26522eac23d880de2722023522d">sp_svc</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    lr_svc, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a4e9874b76913bbabf160a5a855581bbc">lr_svc</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);

    <span class="comment">/* ABT banked register */</span>
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    spsr_abt, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ac5fcf632140189c2cf143162a8388135">spsr_abt</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    sp_abt, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a6ed5ed1e9e6a1e54a4a720269edfee5e">sp_abt</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    lr_abt, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a849c08959c26885f666f8adfae89aaf9">lr_abt</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);

    <span class="comment">/* UND banked register */</span>
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    spsr_und, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a23e21972e22c7e1c44c75a47e4d6443a">spsr_und</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    sp_und, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a184486e6dbb8bf48fd4d4675fb4040e4">sp_und</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    lr_und, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a9c99745c4b28ca5c46c0aee6a164b089">lr_und</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);

    <span class="comment">/* IRQ banked register */</span>
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr     spsr_irq, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#aee1280364392ef11a9db3da9c2a2c5ee">spsr_irq</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr     sp_irq, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a995e4155cdaeb7d8dc530a52f531ad7d">sp_irq</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr     lr_irq, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a40c4ed1151aa96baf0123e142db7fd5c">lr_irq</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);

    <span class="comment">/* FIQ banked register */</span>
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr     spsr_fiq, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a667268175afba21309aaaac957734a43">spsr_fiq</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr     lr_fiq, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a969afbee21b8eeb5325d9093d42fb085">lr_fiq</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    r8_fiq, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ab701f0dbdeace6bb500199d02e3369b3">r8_fiq</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    r9_fiq, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a04eb0a04b720eb5fe1ff3a6105d35e3a">r9_fiq</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    r10_fiq, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a7667e6ed136285709f1c4d4b7b366d90">r10_fiq</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    r11_fiq, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ad746f675f085d70248a5b6209f8f2c1f">r11_fiq</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; msr    r12_fiq, %0\n\t&quot;</span>
                          ::<span class="stringliteral">&quot;r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a9b4ae5ee03bbdb881f787bb43620a12a">r12_fiq</a>) :<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2d3fdf44ea523c8f4978cf9c33107768"></a><!-- doxytag: member="context.c::context_restore_cops" ref="a2d3fdf44ea523c8f4978cf9c33107768" args="(struct arch_regs_cop *regs_cop)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="context_8c.html#a2d3fdf44ea523c8f4978cf9c33107768">context_restore_cops</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structarch__regs__cop.html">arch_regs_cop</a> *&#160;</td>
          <td class="paramname"><em>regs_cop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00331">331</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="armv7__p15_8h.html#a4e31e0e9a65d81a76a699f5acfac2679">write_vbar</a>(regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a335ee10c53de8aea54ce9cd9bc56d4e0">vbar</a>);
    <a class="code" href="armv7__p15_8h.html#aef4ad3f99a91f73dd5ea72a9f08c684d">write_ttbr0</a>(regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a63fedd79936a58893e5d3a188565c194">ttbr0</a>);
    <a class="code" href="armv7__p15_8h.html#a3113363b11bd015751a6fac65457c3ef">write_ttbr1</a>(regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a1dca0b48c512d7e2301433e859d4007d">ttbr1</a>);
    <a class="code" href="armv7__p15_8h.html#a7a2b03678768ed709e85cf17ff7177e0">write_ttbcr</a>(regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a18368f32ecf9fa858d6caedd845ec701">ttbcr</a>);
    <a class="code" href="armv7__p15_8h.html#ae7e49f9effb0c96c1045ceddae9cadf5">write_sctlr</a>(regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a07f46454f9d2a374f9118a03945d3551">sctlr</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a57af844ae7e83a33d88a4c36eee930eb"></a><!-- doxytag: member="context.c::context_save_banked" ref="a57af844ae7e83a33d88a4c36eee930eb" args="(struct arch_regs_banked *regs_banked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="context_8c.html#a57af844ae7e83a33d88a4c36eee930eb">context_save_banked</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structarch__regs__banked.html">arch_regs_banked</a> *&#160;</td>
          <td class="paramname"><em>regs_banked</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00201">201</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">/* USR banked register */</span>
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, sp_usr\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ab0c3d0a7fb315b79b4d6214743b5b082">sp_usr</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);

    <span class="comment">/* SVC banked register */</span>
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, spsr_svc\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ae6da0f77fc42b43bfc0be39e8e5da763">spsr_svc</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, sp_svc\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a1d0fa26522eac23d880de2722023522d">sp_svc</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, lr_svc\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a4e9874b76913bbabf160a5a855581bbc">lr_svc</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);

    <span class="comment">/* ABT banked register */</span>
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, spsr_abt\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ac5fcf632140189c2cf143162a8388135">spsr_abt</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, sp_abt\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a6ed5ed1e9e6a1e54a4a720269edfee5e">sp_abt</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, lr_abt\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a849c08959c26885f666f8adfae89aaf9">lr_abt</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);

    <span class="comment">/* UND banked register */</span>
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, spsr_und\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a23e21972e22c7e1c44c75a47e4d6443a">spsr_und</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, sp_und\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a184486e6dbb8bf48fd4d4675fb4040e4">sp_und</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, lr_und\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a9c99745c4b28ca5c46c0aee6a164b089">lr_und</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);

    <span class="comment">/* IRQ banked register */</span>
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, spsr_irq\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#aee1280364392ef11a9db3da9c2a2c5ee">spsr_irq</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, sp_irq\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a995e4155cdaeb7d8dc530a52f531ad7d">sp_irq</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, lr_irq\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a40c4ed1151aa96baf0123e142db7fd5c">lr_irq</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);

    <span class="comment">/* FIQ banked register  R8_fiq ~ R12_fiq, LR and SPSR */</span>
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, spsr_fiq\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a667268175afba21309aaaac957734a43">spsr_fiq</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, lr_fiq\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a969afbee21b8eeb5325d9093d42fb085">lr_fiq</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, r8_fiq\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ab701f0dbdeace6bb500199d02e3369b3">r8_fiq</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, r9_fiq\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a04eb0a04b720eb5fe1ff3a6105d35e3a">r9_fiq</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, r10_fiq\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a7667e6ed136285709f1c4d4b7b366d90">r10_fiq</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, r11_fiq\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#ad746f675f085d70248a5b6209f8f2c1f">r11_fiq</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);
    <span class="keyword">asm</span> <span class="keyword">volatile</span> (<span class="stringliteral">&quot; mrs     %0, r12_fiq\n\t&quot;</span>
                          :<span class="stringliteral">&quot;=r&quot;</span> (regs_banked-&gt;<a class="code" href="structarch__regs__banked.html#a9b4ae5ee03bbdb881f787bb43620a12a">r12_fiq</a>)::<span class="stringliteral">&quot;memory&quot;</span>, <span class="stringliteral">&quot;cc&quot;</span>);

}
</pre></div>
</div>
</div>
<a class="anchor" id="a9a5bddd4742fe9c4cc8ee9fa50cf03bf"></a><!-- doxytag: member="context.c::context_save_cops" ref="a9a5bddd4742fe9c4cc8ee9fa50cf03bf" args="(struct arch_regs_cop *regs_cop)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="context_8c.html#a9a5bddd4742fe9c4cc8ee9fa50cf03bf">context_save_cops</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structarch__regs__cop.html">arch_regs_cop</a> *&#160;</td>
          <td class="paramname"><em>regs_cop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00322">322</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a335ee10c53de8aea54ce9cd9bc56d4e0">vbar</a> = <a class="code" href="armv7__p15_8h.html#a0c86d33c8981873c7ecad9fc9f8aceaf">read_vbar</a>();
    regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a63fedd79936a58893e5d3a188565c194">ttbr0</a> = <a class="code" href="armv7__p15_8h.html#a4ccd5f7d934e0e5d70f2efa015f24826">read_ttbr0</a>();
    regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a1dca0b48c512d7e2301433e859d4007d">ttbr1</a> = <a class="code" href="armv7__p15_8h.html#a0f00f0b592454cc49a97e37135bae154">read_ttbr1</a>();
    regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a18368f32ecf9fa858d6caedd845ec701">ttbcr</a> = <a class="code" href="armv7__p15_8h.html#ab108290b06009cda35888c4e3cf0e186">read_ttbcr</a>();
    regs_cop-&gt;<a class="code" href="structarch__regs__cop.html#a07f46454f9d2a374f9118a03945d3551">sctlr</a> = <a class="code" href="armv7__p15_8h.html#ad17d4af13acc1a347d253dcc32c25881">read_sctlr</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a39db644c82cc9c99ef78feb58d57b58c"></a><!-- doxytag: member="context.c::context_switch_to_initial_guest" ref="a39db644c82cc9c99ef78feb58d57b58c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="context_8h.html#a39db644c82cc9c99ef78feb58d57b58c">context_switch_to_initial_guest</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00447">447</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structhyp__guest__context.html">hyp_guest_context</a> *context = 0;
    <span class="keyword">struct </span><a class="code" href="structarch__regs.html">arch_regs</a> *<a class="code" href="vdev__sample_8c.html#a83967e2c2e61558528fec54f1060435b">regs</a> = 0;

    uart_print(<span class="stringliteral">&quot;[hyp] switch_to_initial_guest:\n\r&quot;</span>);

    <span class="comment">/* Select the first guest context to switch to. */</span>
    <a class="code" href="context_8c.html#a5de72a0d4dd972c7d7d8c9d08272d9e8">_current_guest_vmid</a> = <a class="code" href="hvmm__types_8h.html#a286d5f39683a49a6e5d4ef92043b3c9f">VMID_INVALID</a>;
    context = &amp;<a class="code" href="context_8c.html#a7a55b222a2790b315eaf5dbe7a12c407">guest_contexts</a>[0];

    <span class="comment">/* Dump the initial register values of the guest for debugging purpose */</span>
    regs = &amp;context-&gt;<a class="code" href="structhyp__guest__context.html#a6fd37717ff9cb8421e3e19acc489b565">regs</a>;
    <a class="code" href="context_8c.html#aa662295d6861cedca861f13c4ad5ece4">context_dump_regs</a>( regs );

    <span class="comment">/* Context Switch with current context == none */</span>
    <a class="code" href="context_8c.html#aaa75f8a973764763b44ca823e02f4406">context_switchto</a>(0);
    <a class="code" href="context_8c.html#a77fe269a194f9dcfcd0a599a9b6e3bfb">context_perform_switch</a>();
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="context_8c_a39db644c82cc9c99ef78feb58d57b58c_cgraph.png" border="0" usemap="#context_8c_a39db644c82cc9c99ef78feb58d57b58c_cgraph" alt=""/></div>
<map name="context_8c_a39db644c82cc9c99ef78feb58d57b58c_cgraph" id="context_8c_a39db644c82cc9c99ef78feb58d57b58c_cgraph">
<area shape="rect" id="node3" href="context_8c.html#aa662295d6861cedca861f13c4ad5ece4" title="context_dump_regs" alt="" coords="272,272,408,301"/><area shape="rect" id="node5" href="context_8c.html#aaa75f8a973764763b44ca823e02f4406" title="context_switchto" alt="" coords="280,325,400,355"/><area shape="rect" id="node9" href="context_8c.html#a77fe269a194f9dcfcd0a599a9b6e3bfb" title="context_perform_switch" alt="" coords="260,484,420,513"/><area shape="rect" id="node7" href="context_8c.html#a00b56df45d0ef16d93040b667bb025ef" title="context_switchto_lock" alt="" coords="519,245,671,275"/><area shape="rect" id="node11" href="context_8c.html#adbcfdbfe8d61021879f1622e2c6dc29c" title="context_perform_switch_to_guest_regs" alt="" coords="469,299,720,328"/><area shape="rect" id="node29" href="vgic_8c.html#acb00c28d2618d3581a7d26f8e265ccb8" title="vgic_flush_virqs" alt="" coords="1035,459,1149,488"/><area shape="rect" id="node43" href="trap_8c.html#a795de22500c2371c39b9275b38e10b91" title="trap_saved_regs" alt="" coords="536,589,653,619"/><area shape="rect" id="node13" href="vmm_8c.html#aad790266948b8b547025a7a62006f0da" title="vmm_stage2_enable" alt="" coords="804,5,945,35"/><area shape="rect" id="node15" href="context_8c.html#a58e0589f3c325fe4e8cd8cdd215d1e8b" title="context_copy_regs" alt="" coords="809,59,940,88"/><area shape="rect" id="node17" href="context_8c.html#a9a5bddd4742fe9c4cc8ee9fa50cf03bf" title="context_save_cops" alt="" coords="808,112,941,141"/><area shape="rect" id="node19" href="context_8c.html#a57af844ae7e83a33d88a4c36eee930eb" title="context_save_banked" alt="" coords="800,165,949,195"/><area shape="rect" id="node21" href="vgic_8c.html#aebad7b956b2c36d2bbe7acdbe333ae8a" title="vgic_save_status" alt="" coords="813,219,936,248"/><area shape="rect" id="node25" href="vmm_8c.html#afee733063f1c9c6f9fa314492d1ffb11" title="vmm_set_vmid_ttbl" alt="" coords="807,272,943,301"/><area shape="rect" id="node27" href="vgic_8c.html#a70332a1790f88fbcb1a4c7014e6b6a02" title="vgic_restore_status" alt="" coords="807,325,943,355"/><area shape="rect" id="node37" href="context_8c.html#a86f464d89297ef8121c2f36141c221a7" title="__mon_switch_to_guest_context" alt="" coords="768,379,981,408"/><area shape="rect" id="node39" href="context_8c.html#a2d3fdf44ea523c8f4978cf9c33107768" title="context_restore_cops" alt="" coords="801,432,948,461"/><area shape="rect" id="node41" href="context_8c.html#a94bb8d6785586134cc873c061076d323" title="context_restore_banked" alt="" coords="795,485,955,515"/><area shape="rect" id="node23" href="vgic_8c.html#a4cf554520738a7934bc4e6917853330c" title="vgic_enable" alt="" coords="1047,219,1137,248"/><area shape="rect" id="node31" href="vgic_8c.html#abfca2f5be8dfbb355800d70dbda23b5e" title="_vgic_dump_regs" alt="" coords="1031,325,1153,355"/><area shape="rect" id="node33" href="vgic_8c.html#ac1d43326139a3717d69ce1f876cd221c" title="vgic_is_free_slot" alt="" coords="1203,325,1323,355"/><area shape="rect" id="node35" href="vgic_8c.html#aab31fc8d2c44ebb938b78cfb1f7c975f" title="vgic_find_free_slot" alt="" coords="1371,325,1501,355"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aaa75f8a973764763b44ca823e02f4406"></a><!-- doxytag: member="context.c::context_switchto" ref="aaa75f8a973764763b44ca823e02f4406" args="(vmid_t vmid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a> <a class="el" href="context_8h.html#aaa75f8a973764763b44ca823e02f4406">context_switchto</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a>&#160;</td>
          <td class="paramname"><em>vmid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00572">572</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="context_8c.html#a00b56df45d0ef16d93040b667bb025ef">context_switchto_lock</a>(vmid, 0);
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="context_8c_aaa75f8a973764763b44ca823e02f4406_cgraph.png" border="0" usemap="#context_8c_aaa75f8a973764763b44ca823e02f4406_cgraph" alt=""/></div>
<map name="context_8c_aaa75f8a973764763b44ca823e02f4406_cgraph" id="context_8c_aaa75f8a973764763b44ca823e02f4406_cgraph">
<area shape="rect" id="node3" href="context_8c.html#a00b56df45d0ef16d93040b667bb025ef" title="context_switchto_lock" alt="" coords="176,5,328,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a00b56df45d0ef16d93040b667bb025ef"></a><!-- doxytag: member="context.c::context_switchto_lock" ref="a00b56df45d0ef16d93040b667bb025ef" args="(vmid_t vmid, uint8_t locked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a> <a class="el" href="context_8h.html#a00b56df45d0ef16d93040b667bb025ef">context_switchto_lock</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a>&#160;</td>
          <td class="paramname"><em>vmid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arch__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>locked</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00577">577</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a> result = <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2af0867c4f6ed7b73f7395ec73ab840989">HVMM_STATUS_IGNORED</a>;

    <a class="code" href="hvmm__trace_8h.html#afd02d86121dd2e186b6240f52df4c716">HVMM_TRACE_ENTER</a>();

    <span class="comment">/* valid and not current vmid, switch */</span>
    <span class="keywordflow">if</span> (<a class="code" href="context_8c.html#a345440f03deca2090efe13b08eaead89">_switch_locked</a> == 0) {
        <span class="keywordflow">if</span> ( !<a class="code" href="context_8c.html#a6523708467fd815ab3dad9638219c7c2">_valid_vmid</a>(vmid) ) {
            result = <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2aa57f4b3848d90559e38172fc5a1e561b">HVMM_STATUS_BAD_ACCESS</a>;
        } <span class="keywordflow">else</span> {
            <a class="code" href="context_8c.html#a5f1b0bb9a3d788646bb83d32d12419f3">_next_guest_vmid</a> = vmid;
            result = <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2addc8231abb0339e0a6abc0d34b156faf">HVMM_STATUS_SUCCESS</a>;

            printh(<span class="stringliteral">&quot;switching to vmid: %x\n&quot;</span>, (<a class="code" href="arch__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)vmid);
        }
    } <span class="keywordflow">else</span> {
        printh(<span class="stringliteral">&quot;context: next vmid locked to %d\n&quot;</span>, <a class="code" href="context_8c.html#a5f1b0bb9a3d788646bb83d32d12419f3">_next_guest_vmid</a> );
    }

    <span class="keywordflow">if</span> ( locked )
        <a class="code" href="context_8c.html#a345440f03deca2090efe13b08eaead89">_switch_locked</a> = locked;

    <a class="code" href="hvmm__trace_8h.html#a9b123d92a0aece2a4900afdc8ab8016f">HVMM_TRACE_EXIT</a>();
    <span class="keywordflow">return</span> result;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3fd5aa68bf14823442fcc5fda4cb6a51"></a><!-- doxytag: member="context.c::context_waiting_vmid" ref="a3fd5aa68bf14823442fcc5fda4cb6a51" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hvmm__types_8h.html#af7e9bd0adfb7d10e7a7a0ee60a5f962c">vmid_t</a> <a class="el" href="context_8h.html#a3fd5aa68bf14823442fcc5fda4cb6a51">context_waiting_vmid</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00567">567</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="context_8c.html#a5f1b0bb9a3d788646bb83d32d12419f3">_next_guest_vmid</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a83895de158b7efc9456e7475528e42d4"></a><!-- doxytag: member="context.c::start_guest_os" ref="a83895de158b7efc9456e7475528e42d4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="context_8h.html#a83895de158b7efc9456e7475528e42d4">start_guest_os</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00604">604</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    init_print();

    <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2">hvmm_status_t</a> ret = <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2ab18889db955a0948118dabdfa0e38b30">HVMM_STATUS_UNKNOWN_ERROR</a>;
    printh(<span class="stringliteral">&quot;[%s : %d] Starting...\n&quot;</span>, __FUNCTION__, __LINE__);

    <span class="comment">/* Initialize Memory Management */</span>
    ret = <a class="code" href="mm_8c.html#ae8f2b7d0b30b5fa78b50cee688872d93">hvmm_mm_init</a>();

    <span class="comment">/* Initialize Interrupt Management */</span>
    ret = <a class="code" href="interrupt_8c.html#a684bacf4c9e7ced32242a2494d14d675">hvmm_interrupt_init</a>();
    <span class="keywordflow">if</span> ( ret != <a class="code" href="hvmm__types_8h.html#a39d593b2c97852f566d7472b76ab7ba2addc8231abb0339e0a6abc0d34b156faf">HVMM_STATUS_SUCCESS</a> ) {
        uart_print(<span class="stringliteral">&quot;[hyp_main] interrupt initialization failed...\n\r&quot;</span>);
    }

    <span class="comment">/* Initialize Guests */</span>
    <a class="code" href="context_8c.html#a0abdd106a2b654464230b622b4c9877e">context_init_guests</a>();

    <span class="comment">/* Initialize Virtual Devices */</span>
    <a class="code" href="vdev_8h.html#ae5a6fee7377fe25c30418c102674e153">vdev_init</a>();

    <span class="comment">/* Virtual GIC Distributor */</span>
    printh( <span class="stringliteral">&quot;tests: Registering sample vdev:&#39;vgicd&#39; at %x\n&quot;</span>, CFG_GIC_BASE_PA | <a class="code" href="gic__regs_8h.html#a9588f04e7045a677e620fe2f23bdb0a2">GIC_OFFSET_GICD</a>);
    <a class="code" href="vdev__gicd_8c.html#a486b6cd2f61165a52985b53909512566">vdev_gicd_init</a>(CFG_GIC_BASE_PA | <a class="code" href="gic__regs_8h.html#a9588f04e7045a677e620fe2f23bdb0a2">GIC_OFFSET_GICD</a>);

    <span class="comment">/* Initialize PIRQ to VIRQ mapping */</span>
    <a class="code" href="virqmap_8c.html#ae23dfc79ba4183fbf86031da2ce4d51c">virqmap_init</a>();

    <span class="comment">/* Start Scheduling */</span>
    <a class="code" href="scheduler_8c.html#abf4312fa4f0d29c7afbefc5ce43a31b7">scheduler_test_scheduling</a>();

    <span class="comment">/* Begin running test code for newly implemented features */</span>
    hvmm_tests_main();

    <span class="comment">/* Print Banner */</span>
    printH(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="version_8h.html#a25559ea480408a5475fc107e48760cc1">BANNER_STRING</a>);

    <span class="comment">/* Switch to the first guest */</span>
    <a class="code" href="context_8c.html#a39db644c82cc9c99ef78feb58d57b58c">context_switch_to_initial_guest</a>();

    <span class="comment">/* The code flow must not reach here */</span>
    uart_print(<span class="stringliteral">&quot;[hyp_main] ERROR: CODE MUST NOT REACH HERE\n\r&quot;</span>);
    <a class="code" href="hvmm__trace_8h.html#aaf886005c496be8f91adae4d34b9a334">hyp_abort_infinite</a>();
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="context_8c_a83895de158b7efc9456e7475528e42d4_cgraph.png" border="0" usemap="#context_8c_a83895de158b7efc9456e7475528e42d4_cgraph" alt=""/></div>
<map name="context_8c_a83895de158b7efc9456e7475528e42d4_cgraph" id="context_8c_a83895de158b7efc9456e7475528e42d4_cgraph">
<area shape="rect" id="node3" href="mm_8c.html#ae8f2b7d0b30b5fa78b50cee688872d93" title="hvmm_mm_init" alt="" coords="211,219,320,248"/><area shape="rect" id="node23" href="interrupt_8c.html#a684bacf4c9e7ced32242a2494d14d675" title="hvmm_interrupt_init" alt="" coords="197,619,333,648"/><area shape="rect" id="node49" href="context_8c.html#a0abdd106a2b654464230b622b4c9877e" title="context_init_guests" alt="" coords="199,885,332,915"/><area shape="rect" id="node63" href="vdev_8h.html#ae5a6fee7377fe25c30418c102674e153" title="vdev_init" alt="" coords="228,1045,303,1075"/><area shape="rect" id="node65" href="vdev__gicd_8c.html#a486b6cd2f61165a52985b53909512566" title="vdev_gicd_init" alt="" coords="213,1099,317,1128"/><area shape="rect" id="node73" href="virqmap_8c.html#ae23dfc79ba4183fbf86031da2ce4d51c" title="virqmap_init" alt="" coords="220,1205,311,1235"/><area shape="rect" id="node79" href="scheduler_8c.html#abf4312fa4f0d29c7afbefc5ce43a31b7" title="scheduler_test_scheduling" alt="" coords="177,1419,353,1448"/><area shape="rect" id="node93" href="context_8c.html#a39db644c82cc9c99ef78feb58d57b58c" title="context_switch_to_initial_guest" alt="" coords="164,1659,367,1688"/><area shape="rect" id="node5" href="vmm_8c.html#a34e0e13c32b08fd108582567c29ccebf" title="vmm_init" alt="" coords="535,59,609,88"/><area shape="rect" id="node11" href="mm_8c.html#aa82c7756438b1aa5429be9ee49aea5ed" title="_hmm_init" alt="" coords="531,192,613,221"/><area shape="rect" id="node21" href="mm_8c.html#a7c9c4518af771f7f39434b5dcc41d1d4" title="hmm_heap_init" alt="" coords="517,245,627,275"/><area shape="rect" id="node7" href="vmm_8c.html#af16a19da3c025dd4aaa0e40ae0bcb205" title="vmm_init_ttbl" alt="" coords="824,5,923,35"/><area shape="rect" id="node9" href="vmm_8c.html#a38fe20d83b4f1d4ceb4f7f9b737a6f2d" title="vmm_init_mmu" alt="" coords="819,59,928,88"/><area shape="rect" id="node13" href="lpae_8c.html#aaa674eddb596444230e0aea1ba32e90e" title="hvmm_mm_lpaed_l1_block" alt="" coords="784,112,963,141"/><area shape="rect" id="node15" href="lpae_8c.html#a804b9089155c7bc74ccea12d009c36fd" title="hvmm_mm_lpaed_l1_table" alt="" coords="785,165,961,195"/><area shape="rect" id="node17" href="lpae_8c.html#a6dba6fbdc7725faf61722eff42e18bbc" title="hvmm_mm_lpaed_l2_table" alt="" coords="785,219,961,248"/><area shape="rect" id="node19" href="lpae_8c.html#a1f31704271c412a5077309bf60b83f86" title="hvmm_mm_lpaed_l3_table" alt="" coords="785,272,961,301"/><area shape="rect" id="node25" href="gic_8c.html#a0913d7e2dc598b3eb2cb09c4a1185cbe" title="gic_init" alt="" coords="541,432,603,461"/><area shape="rect" id="node35" href="vgic_8c.html#a2e0db8f93d8d6a61d737de34aeeed516" title="vgic_init" alt="" coords="537,565,607,595"/><area shape="rect" id="node45" href="vgic_8c.html#a4cf554520738a7934bc4e6917853330c" title="vgic_enable" alt="" coords="527,619,617,648"/><area shape="rect" id="node47" href="virq_8c.html#a47f4ee9004f1b4f6a87cf6e1f4c51557" title="virq_init" alt="" coords="539,672,605,701"/><area shape="rect" id="node27" href="gic_8c.html#ac9cad87ffdf3a3e1cde6002ea3f347a9" title="gic_init_baseaddr" alt="" coords="812,325,935,355"/><area shape="rect" id="node29" href="gic_8c.html#a355755273aee03b63c4a9aa6e7e4a95e" title="gic_dump_registers" alt="" coords="807,379,940,408"/><area shape="rect" id="node31" href="gic_8c.html#a592c46444cc3e5696daa78bedbbe31f3" title="gic_init_dist" alt="" coords="828,432,919,461"/><area shape="rect" id="node33" href="gic_8c.html#a8395d48667bdc01bce88521812a39f53" title="gic_init_cpui" alt="" coords="827,485,920,515"/><area shape="rect" id="node37" href="gic_8c.html#a608941cbc8ab5a657834d451f0368a6e" title="gic_vgic_baseaddr" alt="" coords="808,539,939,568"/><area shape="rect" id="node39" href="vgic_8c.html#a66eca59dda59d2529191ca0c23094fc8" title="_vgic_valid_lr_mask" alt="" coords="804,592,943,621"/><area shape="rect" id="node41" href="vgic_8c.html#a896fa453c39e4d42fa37483b07c7d307" title="vgic_maintenance_irq_enable" alt="" coords="777,645,969,675"/><area shape="rect" id="node43" href="slotpirq_8c.html#a01b3ab3099b2a5512a07cb42a389d84f" title="slotpirq_init" alt="" coords="829,699,917,728"/><area shape="rect" id="node51" href="vmm_8c.html#a269ada885aa7296fc4601e4cfe6a134b" title="vmm_vmid_ttbl" alt="" coords="517,725,627,755"/><area shape="rect" id="node53" href="context_8c.html#a3b7e34c1497427e5fdcc9b059fb813be" title="context_init_cops" alt="" coords="511,779,633,808"/><area shape="rect" id="node55" href="context_8c.html#a6daf5c209647b93b848801070e6e30ef" title="context_init_banked" alt="" coords="503,832,641,861"/><area shape="rect" id="node57" href="vgic_8c.html#ac901a925af53a53bf1840d9be9acd2e0" title="vgic_init_status" alt="" coords="516,885,628,915"/><area shape="rect" id="node59" href="context_8c.html#a3a2da2487bde91bb02d3363bd17d905a" title="_hyp_guest0_copy_zimage" alt="" coords="483,939,661,968"/><area shape="rect" id="node61" href="loadlinux_8c.html#a2a6cc0b74cefed5f4e51dad4629113b6" title="loadlinux_setup_tags" alt="" coords="500,992,644,1021"/><area shape="rect" id="node67" href="vdev__gicd_8c.html#ad4d5cd73ffb5f68c2f5d6f9b8ee920bc" title="vdev_gicd_reset_values" alt="" coords="491,1045,653,1075"/><area shape="rect" id="node69" href="vdev__gicd_8c.html#a857b27e797cea331cdde921c472a3285" title="access_handler" alt="" coords="516,1099,628,1128"/><area shape="rect" id="node71" href="vdev_8h.html#adef10b9bd7b82e079ca0b60b6a555d09" title="vdev_reg_device" alt="" coords="512,1152,632,1181"/><area shape="rect" id="node75" href="vdev__gicd_8c.html#a9c67f2f148d50faebdb7576ea03a5876" title="vgicd_set_callback_changed_istatus" alt="" coords="455,1205,689,1235"/><area shape="rect" id="node77" href="virqmap_8c.html#a17e7cbe76d72e1890ff5a10724d6f19c" title="virqmap_vgicd_changed_istatus_callback_handler" alt="" coords="416,1259,728,1288"/><area shape="rect" id="node81" href="scheduler_8c.html#a48d44e052726283e6931e284d8ee04a2" title="scheduler_test_switch_to_next_guest" alt="" coords="452,1312,692,1341"/><area shape="rect" id="node83" href="timer_8c.html#a833062839177da96d1c10cafd66fb5e3" title="timer_init" alt="" coords="535,1365,609,1395"/><area shape="rect" id="node85" href="timer_8c.html#a0be875a55b17ab6db30adc87ce373f47" title="timer_set_interval" alt="" coords="509,1419,635,1448"/><area shape="rect" id="node87" href="timer_8c.html#afef8b97657801aaf10e7390cfdc822ab" title="timer_add_callback" alt="" coords="505,1472,639,1501"/><area shape="rect" id="node89" href="timer_8c.html#ace4fc5a149dad9e3b44a629ad79a0732" title="timer_start" alt="" coords="531,1525,613,1555"/><area shape="rect" id="node91" href="scheduler_8c.html#a526a3fccdbd15f3d98c26295e2c701db" title="extra_timer_callback" alt="" coords="501,1579,643,1608"/><area shape="rect" id="node95" href="context_8c.html#aa662295d6861cedca861f13c4ad5ece4" title="context_dump_regs" alt="" coords="504,1632,640,1661"/><area shape="rect" id="node97" href="context_8c.html#aaa75f8a973764763b44ca823e02f4406" title="context_switchto" alt="" coords="512,1685,632,1715"/><area shape="rect" id="node99" href="context_8c.html#a77fe269a194f9dcfcd0a599a9b6e3bfb" title="context_perform_switch" alt="" coords="492,1739,652,1768"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a5de72a0d4dd972c7d7d8c9d08272d9e8"></a><!-- doxytag: member="context.c::_current_guest_vmid" ref="a5de72a0d4dd972c7d7d8c9d08272d9e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="context_8c.html#a5de72a0d4dd972c7d7d8c9d08272d9e8">_current_guest_vmid</a> = <a class="el" href="hvmm__types_8h.html#a286d5f39683a49a6e5d4ef92043b3c9f">VMID_INVALID</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00050">50</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5f1b0bb9a3d788646bb83d32d12419f3"></a><!-- doxytag: member="context.c::_next_guest_vmid" ref="a5f1b0bb9a3d788646bb83d32d12419f3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="context_8c.html#a5f1b0bb9a3d788646bb83d32d12419f3">_next_guest_vmid</a> = <a class="el" href="hvmm__types_8h.html#a286d5f39683a49a6e5d4ef92043b3c9f">VMID_INVALID</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00051">51</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="a345440f03deca2090efe13b08eaead89"></a><!-- doxytag: member="context.c::_switch_locked" ref="a345440f03deca2090efe13b08eaead89" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arch__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="context_8c.html#a345440f03deca2090efe13b08eaead89">_switch_locked</a> = 0<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00052">52</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7a55b222a2790b315eaf5dbe7a12c407"></a><!-- doxytag: member="context.c::guest_contexts" ref="a7a55b222a2790b315eaf5dbe7a12c407" args="[NUM_GUEST_CONTEXTS]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structhyp__guest__context.html">hyp_guest_context</a> <a class="el" href="context_8c.html#a7a55b222a2790b315eaf5dbe7a12c407">guest_contexts</a>[<a class="el" href="context_8c.html#acf4405f8c387893e69eadc140804d0a4">NUM_GUEST_CONTEXTS</a>]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="context_8c_source.html#l00049">49</a> of file <a class="el" href="context_8c_source.html">context.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 18 2014 16:44:40 for khypervisor by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
